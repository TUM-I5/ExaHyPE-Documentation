<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<link rel="icon" href="../../Peano-icon.png" type="image/x-icon" />
<title>Peano</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="../../doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript" src="../../doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript" src="../../doxygen-awesome-interactive-toc.js"></script>
<script type="text/javascript" src="../../doxygen-awesome-tabs.js"></script>
<script type="text/javascript" src="../../toggle-alternative-theme.js"></script>
<script type="text/javascript">
    DoxygenAwesomeFragmentCopyButton.init()
    DoxygenAwesomeDarkModeToggle.init()
    DoxygenAwesomeParagraphLink.init()
    DoxygenAwesomeInteractiveToc.init()
    DoxygenAwesomeTabs.init()
</script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="../../custom.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="../../custom-alternative.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- https://tholman.com/github-corners/ -->
<!-- https://bryce.io/gitlab-corners/ -->
<style>.gitlab-corner-wrapper{overflow:hidden;width:100px;height:100px;position:absolute;top:0;right:0}.gitlab-corner{position:absolute;top:-16px;right:-50px;transform:rotate(45deg);background:#333;border:44px solid #333;border-bottom:none;border-top:#333 solid 16px}.gitlab-corner svg{width:60px;height:60px;margin-bottom:-4px}.cls-1{fill:#fc6d26}.cls-2{fill:#e24329}.cls-3{fill:#fca326}.gitlab-corner:hover .cls-1{animation:cycle .6s}.gitlab-corner:hover .cls-2{animation:cycleMid .6s}.gitlab-corner:hover .cls-3{animation:cycleEnd .6s}@keyframes cycle{100%,15%,60%{fill:#fc6d26}30%,75%{fill:#e24329}45%,90%{fill:#fca326}}@keyframes cycleMid{100%,15%,60%{fill:#e24329}30%,75%{fill:#fca326}45%,90%{fill:#fc6d26}}@keyframes cycleEnd{100%,15%,60%{fill:#fca326}30%,75%{fill:#fc6d26}45%,90%{fill:#e24329}}@media (max-width:500px){.gitlab-corner:hover .cls-1,.gitlab-corner:hover .cls-2,.gitlab-corner:hover .cls-3{animation:none}.gitlab-corner .cls-1{animation:cycle .6s}.gitlab-corner .cls-2{animation:cycleMid .6s}.gitlab-corner .cls-3{animation:cycleEnd .6s}}</style><div class="gitlab-corner-wrapper"><a href="https://gitlab.lrz.de/hpcsoftware/Peano" class="gitlab-corner" aria-label="View source on GitLab"><svg id="logo_art" data-name="logo art" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 586 559"><g id="g44"><path id="path46" class="cls-1" d="M461.17,301.83l-18.91-58.12L404.84,128.43a6.47,6.47,0,0,0-12.27,0L355.15,243.64H230.82L193.4,128.43a6.46,6.46,0,0,0-12.26,0L143.78,243.64l-18.91,58.19a12.88,12.88,0,0,0,4.66,14.39L293,435,456.44,316.22a12.9,12.9,0,0,0,4.73-14.39"/></g><g id="g48"><path id="path50" class="cls-2" d="M293,434.91h0l62.16-191.28H230.87L293,434.91Z"/></g><g id="g56"><path id="path58" class="cls-1" d="M293,434.91,230.82,243.63h-87L293,434.91Z"/></g><g id="g64"><path id="path66" class="cls-3" d="M143.75,243.69h0l-18.91,58.12a12.88,12.88,0,0,0,4.66,14.39L293,435,143.75,243.69Z"/></g><g id="g72"><path id="path74" class="cls-2" d="M143.78,243.69h87.11L193.4,128.49a6.47,6.47,0,0,0-12.27,0l-37.35,115.2Z"/></g><g id="g76"><path id="path78" class="cls-1" d="M293,434.91l62.16-191.28H442.3L293,434.91Z"/></g><g id="g80"><path id="path82" class="cls-3" d="M442.24,243.69h0l18.91,58.12a12.85,12.85,0,0,1-4.66,14.39L293,434.91l149.2-191.22Z"/></g><g id="g84"><path id="path86" class="cls-2" d="M442.28,243.69h-87.1l37.42-115.2a6.46,6.46,0,0,1,12.26,0l37.42,115.2Z"/></g></svg></a></div>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../Peano-icon.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Peano
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('d3/d01/swift_visualisation.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Visualisation</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md1151"></a>
The Peano Way</h1>
<p>Swift 2 relies on Peano's standard output routines to write file dumps. As the files can be rather large, the simulation configuration allows you to specify exactly how often you want to see file dumps, and you can also add spatial filters. The latter help you to visualise only subdomains. As we rely on Peano's infrastructure, you can use the <code><a class="el" href="../../d3/dba/render_8py.html">render.py</a></code> script in <code>python/peano4/visualisation</code> to convert the output files into vtu files. Consult also <a class="el" href="../../df/d47/documentation_tarch_visualisation.html">Peano's generic discussion</a> of various visualisation pathways.</p>
<h1><a class="anchor" id="autotoc_md1152"></a>
Python support for vtu format</h1>
<p>Besides the infrastructure that Peano provides, in Swift we very often require to visualise the different simulation quantities in detail, e.g. to compare the output of the simulation against a reference such as typically a known analytical solution. For this purpose, a rudimentary reader for particles (points) stored in <code>.vtu</code> files is provided. To use it, the <a href="https://github.com/joergbuchwald/VTUinterface"><code>VTUInterface</code></a> python library is required. The library can be installed using pip, i.e. invoking</p>
<div class="fragment"><div class="line">pip install VTUinterface</div>
</div><!-- fragment --><p>The reader provides two default options: Either read in a single vtu file, or provide it with the .pvd file and specify the time of the snapshot you want to extract.</p>
<p>To read in a single vtu file, provide the filename as the keyword argument, e.g.</p>
<div class="fragment"><div class="line"><span class="keyword">from</span> <a class="code hl_class" href="../../d9/d29/classpeano4_1_1toolbox_1_1particles_1_1postprocessing_1_1ParticleVTUReader_1_1ParticleVTUReader.html">peano4.toolbox.particles.postprocessing.ParticleVTUReader</a> <span class="keyword">import</span> ParticleVTUReader</div>
<div class="line">vtufile = <span class="stringliteral">&quot;path/to/your/output_file.vtu&quot;</span></div>
<div class="line">reader = ParticleVTUReader( vtufile=vtufile )</div>
<div class="line">partData = reader.load() <span class="comment"># this is where the actual reading happens</span></div>
<div class="ttc" id="aclasspeano4_1_1toolbox_1_1particles_1_1postprocessing_1_1ParticleVTUReader_1_1ParticleVTUReader_html"><div class="ttname"><a href="../../d9/d29/classpeano4_1_1toolbox_1_1particles_1_1postprocessing_1_1ParticleVTUReader_1_1ParticleVTUReader.html">peano4.toolbox.particles.postprocessing.ParticleVTUReader.ParticleVTUReader</a></div><div class="ttdoc">Reads in particle fields from a single .vtu file, or all .vtu at a given snapshot time specified in t...</div><div class="ttdef"><b>Definition</b> <a href="../../dd/d58/ParticleVTUReader_8py_source.html#l00137">ParticleVTUReader.py:137</a></div></div>
</div><!-- fragment --><p>Particle data for a given snapshot may be stored in several .vtu files. Metadata about the storage is contained in the corresponding <code>.pvd</code> file. To read in all particle data of a given snapshot, you need to provide both the path to the <code>.pvd</code> file, as well as the time of the snapshot you want to extract, e.g. like so:</p>
<div class="fragment"><div class="line"><span class="keyword">from</span> <a class="code hl_class" href="../../d9/d29/classpeano4_1_1toolbox_1_1particles_1_1postprocessing_1_1ParticleVTUReader_1_1ParticleVTUReader.html">peano4.toolbox.particles.postprocessing.ParticleVTUReader</a> <span class="keyword">import</span> ParticleVTUReader</div>
<div class="line">pvdfile = <span class="stringliteral">&quot;path/to/your/output_file.pvd&quot;</span></div>
<div class="line">reader = ParticleVTUReader(pvdfile=pvdfile, snapshot_time=0.1)</div>
<div class="line">partData = reader.load() <span class="comment"># this is where the actual reading happens</span></div>
</div><!-- fragment --><p>The reader will return an object (<code>partData</code>) with attributes representing particle fields with the same name as they were set in the <code>.vtu</code> files, save for necessary changes to prevent illegal characters in attribute names. To display what the actual attribute names are, you can run <code>partData.show_attribute_list()</code>:</p>
<div class="fragment"><div class="line"><span class="keyword">from</span> <a class="code hl_class" href="../../d9/d29/classpeano4_1_1toolbox_1_1particles_1_1postprocessing_1_1ParticleVTUReader_1_1ParticleVTUReader.html">peano4.toolbox.particles.postprocessing.ParticleVTUReader</a> <span class="keyword">import</span> ParticleVTUReader</div>
<div class="line">pvdfile = <span class="stringliteral">&quot;path/to/your/output_file.pvd&quot;</span></div>
<div class="line">reader = ParticleVTUReader(pvdfile=pvdfile, snapshot_time=0.1)</div>
<div class="line">partData = reader.load()</div>
<div class="line"> </div>
<div class="line"><span class="comment"># show me what particle fields are stored</span></div>
<div class="line">partData.show_attribute_list() <span class="comment"># prints results to screen</span></div>
</div><!-- fragment --><p>Below is a minimal full example that reads in data and creates three subplots of the particle densities, pressures, and internal energies:</p>
<div class="fragment"><div class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> pyplot <span class="keyword">as</span> plt</div>
<div class="line"><span class="keyword">from</span> <a class="code hl_class" href="../../d9/d29/classpeano4_1_1toolbox_1_1particles_1_1postprocessing_1_1ParticleVTUReader_1_1ParticleVTUReader.html">peano4.toolbox.particles.postprocessing.ParticleVTUReader</a> <span class="keyword">import</span> ParticleVTUReader</div>
<div class="line"> </div>
<div class="line"><span class="comment"># read in data</span></div>
<div class="line">pvdfile = <span class="stringliteral">&quot;path/to/your/output_file.pvd&quot;</span></div>
<div class="line">reader = ParticleVTUReader(pvdfile=pvdfile, snapshot_time=0.1)</div>
<div class="line">partData = reader.load()</div>
<div class="line"> </div>
<div class="line"><span class="comment"># show me what particle fields are stored.</span></div>
<div class="line"><span class="comment"># These are also the field names that you can access</span></div>
<div class="line"><span class="comment"># as the `partData` object&#39;s attributes.</span></div>
<div class="line">partData.show_attribute_list()</div>
<div class="line"> </div>
<div class="line"><span class="comment"># Extract data into individual arrays for your convenience</span></div>
<div class="line">x = partData.x[:,0]</div>
<div class="line">y = partData.x[:,1]</div>
<div class="line">density = partData.density</div>
<div class="line">pressure = partData.pressure</div>
<div class="line">internal_energy = partData.u</div>
<div class="line"> </div>
<div class="line"><span class="comment"># Now plot them</span></div>
<div class="line">plt.figure()</div>
<div class="line">plt.subplot(1,3,1)</div>
<div class="line">plt.scatter(x, y, c=density)</div>
<div class="line">plt.title(<span class="stringliteral">&quot;Density&quot;</span>)</div>
<div class="line">plt.colorbar()</div>
<div class="line"> </div>
<div class="line">plt.subplot(1,3,2)</div>
<div class="line">plt.scatter(x, y, c=pressure)</div>
<div class="line">plt.title(<span class="stringliteral">&quot;Pressure&quot;</span>)</div>
<div class="line">plt.colorbar()</div>
<div class="line"> </div>
<div class="line">plt.subplot(1,3,3)</div>
<div class="line">plt.scatter(x, y, c=internal_energy)</div>
<div class="line">plt.title(<span class="stringliteral">&quot;Internal Energy&quot;</span>)</div>
<div class="line">plt.colorbar()</div>
<div class="line"> </div>
<div class="line">plt.show()</div>
</div><!-- fragment --><p>A few scripts are included among the tests in <code>/tests/swift2/hydro-simple-sph-physics/</code>, which can be used as reference.</p>
<h1><a class="anchor" id="autotoc_md1153"></a>
Particle database</h1>
<p>If you decide to dump particles into a csv database via the particles toolbox, you might want to use the <a class="el" href="../../d7/dc1/convert_8py.html">peano4/toolbox/particles/postprocessing/convert.py</a> to transform this database into a proper vtu file sequence or to inspect the actual particle trajectory files, which do not dump all data but only data that exceeds certain thresholds.</p>
<h1><a class="anchor" id="autotoc_md1154"></a>
Particle rearrangement stats</h1>
<p>There is a script</p>
<div class="fragment"><div class="line">python3 ~/git/Peano/python/<a class="code hl_namespace" href="../../de/dac/namespaceswift2.html">swift2</a>/postprocessing/<a class="code hl_namespace" href="../../de/d73/namespaceplot.html">plot</a>-lift-drop-statistics.py output.txt  -v</div>
<div class="ttc" id="anamespaceplot_html"><div class="ttname"><a href="../../de/d73/namespaceplot.html">plot</a></div><div class="ttdoc">-lift-drop-statistics</div></div>
<div class="ttc" id="anamespaceswift2_html"><div class="ttname"><a href="../../de/dac/namespaceswift2.html">swift2</a></div><div class="ttdoc">This file is part of the SWIFT 2 project.</div><div class="ttdef"><b>Definition</b> <a href="../../da/d65/FixedBoundary_8h_source.html#l00008">FixedBoundary.h:8</a></div></div>
</div><!-- fragment --><p>which allows you to visualise the mesh rearrangement statistics once you dump the information output into a file. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../index.html">Peano</a></li><li class="navelem"><a class="el" href="../../d6/dba/page_swift2_home.html">Swift 2</a></li>
    <li class="footer">Generated on Tue Jul 1 2025 11:29:06 for Peano by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0 </li>
  </ul>
</div>
</body>
</html>
