<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<link rel="icon" href="../../Peano-icon.png" type="image/x-icon" />
<title>Peano</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="../../doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript" src="../../doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript" src="../../doxygen-awesome-interactive-toc.js"></script>
<script type="text/javascript" src="../../doxygen-awesome-tabs.js"></script>
<script type="text/javascript" src="../../toggle-alternative-theme.js"></script>
<script type="text/javascript">
    DoxygenAwesomeFragmentCopyButton.init()
    DoxygenAwesomeDarkModeToggle.init()
    DoxygenAwesomeParagraphLink.init()
    DoxygenAwesomeInteractiveToc.init()
    DoxygenAwesomeTabs.init()
</script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="../../custom.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="../../custom-alternative.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- https://tholman.com/github-corners/ -->
<!-- https://bryce.io/gitlab-corners/ -->
<style>.gitlab-corner-wrapper{overflow:hidden;width:100px;height:100px;position:absolute;top:0;right:0}.gitlab-corner{position:absolute;top:-16px;right:-50px;transform:rotate(45deg);background:#333;border:44px solid #333;border-bottom:none;border-top:#333 solid 16px}.gitlab-corner svg{width:60px;height:60px;margin-bottom:-4px}.cls-1{fill:#fc6d26}.cls-2{fill:#e24329}.cls-3{fill:#fca326}.gitlab-corner:hover .cls-1{animation:cycle .6s}.gitlab-corner:hover .cls-2{animation:cycleMid .6s}.gitlab-corner:hover .cls-3{animation:cycleEnd .6s}@keyframes cycle{100%,15%,60%{fill:#fc6d26}30%,75%{fill:#e24329}45%,90%{fill:#fca326}}@keyframes cycleMid{100%,15%,60%{fill:#e24329}30%,75%{fill:#fca326}45%,90%{fill:#fc6d26}}@keyframes cycleEnd{100%,15%,60%{fill:#fca326}30%,75%{fill:#fc6d26}45%,90%{fill:#e24329}}@media (max-width:500px){.gitlab-corner:hover .cls-1,.gitlab-corner:hover .cls-2,.gitlab-corner:hover .cls-3{animation:none}.gitlab-corner .cls-1{animation:cycle .6s}.gitlab-corner .cls-2{animation:cycleMid .6s}.gitlab-corner .cls-3{animation:cycleEnd .6s}}</style><div class="gitlab-corner-wrapper"><a href="https://gitlab.lrz.de/hpcsoftware/Peano" class="gitlab-corner" aria-label="View source on GitLab"><svg id="logo_art" data-name="logo art" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 586 559"><g id="g44"><path id="path46" class="cls-1" d="M461.17,301.83l-18.91-58.12L404.84,128.43a6.47,6.47,0,0,0-12.27,0L355.15,243.64H230.82L193.4,128.43a6.46,6.46,0,0,0-12.26,0L143.78,243.64l-18.91,58.19a12.88,12.88,0,0,0,4.66,14.39L293,435,456.44,316.22a12.9,12.9,0,0,0,4.73-14.39"/></g><g id="g48"><path id="path50" class="cls-2" d="M293,434.91h0l62.16-191.28H230.87L293,434.91Z"/></g><g id="g56"><path id="path58" class="cls-1" d="M293,434.91,230.82,243.63h-87L293,434.91Z"/></g><g id="g64"><path id="path66" class="cls-3" d="M143.75,243.69h0l-18.91,58.12a12.88,12.88,0,0,0,4.66,14.39L293,435,143.75,243.69Z"/></g><g id="g72"><path id="path74" class="cls-2" d="M143.78,243.69h87.11L193.4,128.49a6.47,6.47,0,0,0-12.27,0l-37.35,115.2Z"/></g><g id="g76"><path id="path78" class="cls-1" d="M293,434.91l62.16-191.28H442.3L293,434.91Z"/></g><g id="g80"><path id="path82" class="cls-3" d="M442.24,243.69h0l18.91,58.12a12.85,12.85,0,0,1-4.66,14.39L293,434.91l149.2-191.22Z"/></g><g id="g84"><path id="path86" class="cls-2" d="M442.28,243.69h-87.1l37.42-115.2a6.46,6.46,0,0,1,12.26,0l37.42,115.2Z"/></g></svg></a></div>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../Peano-icon.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Peano
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('d7/da3/namespaceswift2_1_1kernels_1_1coalesced.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#namespaces">Namespaces</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">swift2::kernels::coalesced Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="namespaces" name="namespaces"></a>
Namespaces</h2></td></tr>
<tr class="memitem:d4/d01/namespaceswift2_1_1kernels_1_1coalesced_1_1prefixcheck" id="r_d4/d01/namespaceswift2_1_1kernels_1_1coalesced_1_1prefixcheck"><td class="memItemLeft" align="right" valign="top">namespace &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d01/namespaceswift2_1_1kernels_1_1coalesced_1_1prefixcheck.html">prefixcheck</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:af22c637b771c7371f6f27ede3e6030b0" id="r_af22c637b771c7371f6f27ede3e6030b0"><td class="memTemplParams" colspan="2">template&lt;typename ParticleContainer &gt; </td></tr>
<tr class="memitem:af22c637b771c7371f6f27ede3e6030b0"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="../../d9/d4d/FaceIntegral_8template_8cpp.html#a7ce6528e12d0effe4d57054974659f90">void</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="#af22c637b771c7371f6f27ede3e6030b0">forAllParticles</a> (<a class="el" href="../../de/df3/CustomRiemann_8template_8h.html#a92b303b76a3f942ea819498907d5e83c">const</a> <a class="el" href="../../dd/dc6/structpeano4_1_1datamanagement_1_1VertexMarker.html">peano4::datamanagement::VertexMarker</a> &amp;marker, ParticleContainer &amp;assignedParticles, <a class="el" href="../../d1/d99/Prediction_8EnclaveTask_8template_8cpp.html#a61569f2965b7a369eb10b6d75d410d11">int</a> numberOfCoalescedAssignedParticles, ParticleUnaryOperatorOnVertex&lt; typename ParticleContainer::DoFType &gt; auto f, <a class="el" href="../../de/dd5/namespaceswift2_1_1kernels.html#a4e97079bcd13f3a21303ddcb8b5eb793">UpdateParticleAssignedToVertexPredicate</a>&lt; typename ParticleContainer::DoFType &gt; predicate)</td></tr>
<tr class="memdesc:af22c637b771c7371f6f27ede3e6030b0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Version of forAllParticles assuming chunks of coalesced memory.  <br /></td></tr>
<tr class="separator:af22c637b771c7371f6f27ede3e6030b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3fdb4b8fb655879a6f63a1110bbd90f7" id="r_a3fdb4b8fb655879a6f63a1110bbd90f7"><td class="memTemplParams" colspan="2">template&lt;typename ParticleContainer &gt; </td></tr>
<tr class="memitem:a3fdb4b8fb655879a6f63a1110bbd90f7"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="../../d9/d4d/FaceIntegral_8template_8cpp.html#a7ce6528e12d0effe4d57054974659f90">void</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="#a3fdb4b8fb655879a6f63a1110bbd90f7">forAllParticles</a> (<a class="el" href="../../de/df3/CustomRiemann_8template_8h.html#a92b303b76a3f942ea819498907d5e83c">const</a> <a class="el" href="../../dc/d59/structpeano4_1_1datamanagement_1_1CellMarker.html">peano4::datamanagement::CellMarker</a> &amp;marker, ParticleContainer &amp;localParticles, <a class="el" href="../../de/df3/CustomRiemann_8template_8h.html#a92b303b76a3f942ea819498907d5e83c">const</a> std::vector&lt; <a class="el" href="../../d1/d99/Prediction_8EnclaveTask_8template_8cpp.html#a61569f2965b7a369eb10b6d75d410d11">int</a> &gt; &amp;numberOfCoalescedLocalParticlesPerVertex, ParticleUnaryOperatorOnCell&lt; <a class="el" href="../../de/dd5/namespaceswift2_1_1kernels.html#a5209e6f1752aa3cc4110e64a35edf021">PCParticle</a>&lt; ParticleContainer &gt; &gt; auto f, <a class="el" href="../../de/dd5/namespaceswift2_1_1kernels.html#a4e928bb2ae979528ac3ca42a470a69b4">UpdateParticleAssignedToCellPredicate</a>&lt; <a class="el" href="../../de/dd5/namespaceswift2_1_1kernels.html#a5209e6f1752aa3cc4110e64a35edf021">PCParticle</a>&lt; ParticleContainer &gt; &gt; predicate)</td></tr>
<tr class="memdesc:a3fdb4b8fb655879a6f63a1110bbd90f7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Version of forAllParticles assuming chunks of coalesced memory.  <br /></td></tr>
<tr class="separator:a3fdb4b8fb655879a6f63a1110bbd90f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a157d932934a75a454149163a91785945" id="r_a157d932934a75a454149163a91785945"><td class="memTemplParams" colspan="2">template&lt;typename LocalParticleContainer , typename ActiveParticleContainer &gt; </td></tr>
<tr class="memitem:a157d932934a75a454149163a91785945"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="../../d9/d4d/FaceIntegral_8template_8cpp.html#a7ce6528e12d0effe4d57054974659f90">void</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="#a157d932934a75a454149163a91785945">forAllParticlePairs</a> (<a class="el" href="../../de/df3/CustomRiemann_8template_8h.html#a92b303b76a3f942ea819498907d5e83c">const</a> <a class="el" href="../../dc/d59/structpeano4_1_1datamanagement_1_1CellMarker.html">peano4::datamanagement::CellMarker</a> &amp;marker, LocalParticleContainer &amp;localParticles, ActiveParticleContainer &amp;activeParticles, <a class="el" href="../../de/df3/CustomRiemann_8template_8h.html#a92b303b76a3f942ea819498907d5e83c">const</a> std::vector&lt; <a class="el" href="../../d1/d99/Prediction_8EnclaveTask_8template_8cpp.html#a61569f2965b7a369eb10b6d75d410d11">int</a> &gt; &amp;numberOfCoalescedLocalParticlesPerVertex, <a class="el" href="../../de/df3/CustomRiemann_8template_8h.html#a92b303b76a3f942ea819498907d5e83c">const</a> std::vector&lt; <a class="el" href="../../d1/d99/Prediction_8EnclaveTask_8template_8cpp.html#a61569f2965b7a369eb10b6d75d410d11">int</a> &gt; &amp;numberOfCoalescedActiveParticlesPerVertex, ParticleBinaryOperator&lt; <a class="el" href="../../de/dd5/namespaceswift2_1_1kernels.html#a5209e6f1752aa3cc4110e64a35edf021">PCParticle</a>&lt; LocalParticleContainer &gt;, <a class="el" href="../../de/dd5/namespaceswift2_1_1kernels.html#a5209e6f1752aa3cc4110e64a35edf021">PCParticle</a>&lt; ActiveParticleContainer &gt; &gt; auto f, <a class="el" href="../../de/dd5/namespaceswift2_1_1kernels.html#a4e928bb2ae979528ac3ca42a470a69b4">UpdateParticleAssignedToCellPredicate</a>&lt; <a class="el" href="../../de/dd5/namespaceswift2_1_1kernels.html#a5209e6f1752aa3cc4110e64a35edf021">PCParticle</a>&lt; LocalParticleContainer &gt; &gt; localParticlePredicate, <a class="el" href="../../de/dd5/namespaceswift2_1_1kernels.html#aa79965db74f1ffa27cf65def03539da9">UpdateParticlePairWithinCellPredicate</a>&lt; <a class="el" href="../../de/dd5/namespaceswift2_1_1kernels.html#a5209e6f1752aa3cc4110e64a35edf021">PCParticle</a>&lt; LocalParticleContainer &gt; &gt; particlePairPredicate)</td></tr>
<tr class="memdesc:a157d932934a75a454149163a91785945"><td class="mdescLeft">&#160;</td><td class="mdescRight">Simple vectorised version of pair-wise comparison.  <br /></td></tr>
<tr class="separator:a157d932934a75a454149163a91785945"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a157d932934a75a454149163a91785945" name="a157d932934a75a454149163a91785945"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a157d932934a75a454149163a91785945">&#9670;&#160;</a></span>forAllParticlePairs()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename LocalParticleContainer , typename ActiveParticleContainer &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d4d/FaceIntegral_8template_8cpp.html#a7ce6528e12d0effe4d57054974659f90">void</a> swift2::kernels::coalesced::forAllParticlePairs </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/df3/CustomRiemann_8template_8h.html#a92b303b76a3f942ea819498907d5e83c">const</a> <a class="el" href="../../dc/d59/structpeano4_1_1datamanagement_1_1CellMarker.html">peano4::datamanagement::CellMarker</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>marker</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">LocalParticleContainer &amp;</td>          <td class="paramname"><span class="paramname"><em>localParticles</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ActiveParticleContainer &amp;</td>          <td class="paramname"><span class="paramname"><em>activeParticles</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/df3/CustomRiemann_8template_8h.html#a92b303b76a3f942ea819498907d5e83c">const</a> std::vector&lt; <a class="el" href="../../d1/d99/Prediction_8EnclaveTask_8template_8cpp.html#a61569f2965b7a369eb10b6d75d410d11">int</a> &gt; &amp;</td>          <td class="paramname"><span class="paramname"><em>numberOfCoalescedLocalParticlesPerVertex</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/df3/CustomRiemann_8template_8h.html#a92b303b76a3f942ea819498907d5e83c">const</a> std::vector&lt; <a class="el" href="../../d1/d99/Prediction_8EnclaveTask_8template_8cpp.html#a61569f2965b7a369eb10b6d75d410d11">int</a> &gt; &amp;</td>          <td class="paramname"><span class="paramname"><em>numberOfCoalescedActiveParticlesPerVertex</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ParticleBinaryOperator&lt; <a class="el" href="../../de/dd5/namespaceswift2_1_1kernels.html#a5209e6f1752aa3cc4110e64a35edf021">PCParticle</a>&lt; LocalParticleContainer &gt;, <a class="el" href="../../de/dd5/namespaceswift2_1_1kernels.html#a5209e6f1752aa3cc4110e64a35edf021">PCParticle</a>&lt; ActiveParticleContainer &gt; &gt; auto</td>          <td class="paramname"><span class="paramname"><em>f</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/dd5/namespaceswift2_1_1kernels.html#a4e928bb2ae979528ac3ca42a470a69b4">UpdateParticleAssignedToCellPredicate</a>&lt; <a class="el" href="../../de/dd5/namespaceswift2_1_1kernels.html#a5209e6f1752aa3cc4110e64a35edf021">PCParticle</a>&lt; LocalParticleContainer &gt; &gt;</td>          <td class="paramname"><span class="paramname"><em>localParticlePredicate</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/dd5/namespaceswift2_1_1kernels.html#aa79965db74f1ffa27cf65def03539da9">UpdateParticlePairWithinCellPredicate</a>&lt; <a class="el" href="../../de/dd5/namespaceswift2_1_1kernels.html#a5209e6f1752aa3cc4110e64a35edf021">PCParticle</a>&lt; LocalParticleContainer &gt; &gt;</td>          <td class="paramname"><span class="paramname"><em>particlePairPredicate</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Simple vectorised version of pair-wise comparison. </p>
<p>Please consult the cousin routine in <a class="el" href="../../db/d2b/ParticleSetIterators_8h.html">swift2/kernels/ParticleSetIterators.h</a> for generic docu.</p>
<p>We know in this case that activeParticles is clustered into chunks described by numberOfCoalescedActiveParticlesPerVertex. The same reasoning holds for localParticles. So this routine is very similar to <a class="el" href="#af22c637b771c7371f6f27ede3e6030b0" title="Version of forAllParticles assuming chunks of coalesced memory.">forAllParticles()</a>, but it hosts two different particle sets (which might even point to different particle types) and the set of active particles is likely much bigger than the local particles.</p>
<p>Our implementation does not exploit our specialist knowledge about the local particles. It loops over them one by one. Per local particles it has to loop over all active particles. Here, we employ exactly the techniques described for <a class="el" href="#af22c637b771c7371f6f27ede3e6030b0" title="Version of forAllParticles assuming chunks of coalesced memory.">forAllParticles()</a>, i.e. we run over the active particle set chunk-wisely. Per chunk, we exploit the fact that particles are stored continuously. </p>

<p class="definition">Definition at line <a class="el" href="../../dd/d98/cppiterators_2ParticleSetIterators_8cpph_source.html#l00052">52</a> of file <a class="el" href="../../dd/d98/cppiterators_2ParticleSetIterators_8cpph_source.html">ParticleSetIterators.cpph</a>.</p>

<p class="reference">References <a class="el" href="../../d3/db1/VectorScalarOperations_8cpph_source.html#l00185">tarch::la::oneGreater()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d66/BenchmarkDriver_8cpp_source.html#l00194">runBenchmark()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d7/da3/namespaceswift2_1_1kernels_1_1coalesced_a157d932934a75a454149163a91785945_cgraph.png" border="0" usemap="#ad7/da3/namespaceswift2_1_1kernels_1_1coalesced_a157d932934a75a454149163a91785945_cgraph" alt=""/></div>
<map name="ad7/da3/namespaceswift2_1_1kernels_1_1coalesced_a157d932934a75a454149163a91785945_cgraph" id="ad7/da3/namespaceswift2_1_1kernels_1_1coalesced_a157d932934a75a454149163a91785945_cgraph">
<area shape="rect" title="Simple vectorised version of pair&#45;wise comparison." alt="" coords="5,5,195,45"/>
<area shape="rect" href="../../d2/d45/namespacetarch_1_1la.html#af09537d7c93cfdf2e510494fca92cf0b" title=" " alt="" coords="243,13,399,38"/>
<area shape="poly" title=" " alt="" coords="195,23,229,23,229,28,195,28"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d7/da3/namespaceswift2_1_1kernels_1_1coalesced_a157d932934a75a454149163a91785945_icgraph.png" border="0" usemap="#ad7/da3/namespaceswift2_1_1kernels_1_1coalesced_a157d932934a75a454149163a91785945_icgraph" alt=""/></div>
<map name="ad7/da3/namespaceswift2_1_1kernels_1_1coalesced_a157d932934a75a454149163a91785945_icgraph" id="ad7/da3/namespaceswift2_1_1kernels_1_1coalesced_a157d932934a75a454149163a91785945_icgraph">
<area shape="rect" title="Simple vectorised version of pair&#45;wise comparison." alt="" coords="273,5,463,45"/>
<area shape="rect" href="../../de/d66/BenchmarkDriver_8cpp.html#ab62b2a3788115c3ba667e7d7ef98ceb7" title=" " alt="" coords="108,13,225,38"/>
<area shape="poly" title=" " alt="" coords="260,28,225,28,225,23,260,23"/>
<area shape="rect" href="../../de/d66/BenchmarkDriver_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title="Main routine of the SPH code." alt="" coords="5,13,60,38"/>
<area shape="poly" title=" " alt="" coords="94,28,60,28,60,23,94,23"/>
</map>
</div>

</div>
</div>
<a id="a3fdb4b8fb655879a6f63a1110bbd90f7" name="a3fdb4b8fb655879a6f63a1110bbd90f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3fdb4b8fb655879a6f63a1110bbd90f7">&#9670;&#160;</a></span>forAllParticles() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename ParticleContainer &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d4d/FaceIntegral_8template_8cpp.html#a7ce6528e12d0effe4d57054974659f90">void</a> swift2::kernels::coalesced::forAllParticles </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/df3/CustomRiemann_8template_8h.html#a92b303b76a3f942ea819498907d5e83c">const</a> <a class="el" href="../../dc/d59/structpeano4_1_1datamanagement_1_1CellMarker.html">peano4::datamanagement::CellMarker</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>marker</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ParticleContainer &amp;</td>          <td class="paramname"><span class="paramname"><em>localParticles</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/df3/CustomRiemann_8template_8h.html#a92b303b76a3f942ea819498907d5e83c">const</a> std::vector&lt; <a class="el" href="../../d1/d99/Prediction_8EnclaveTask_8template_8cpp.html#a61569f2965b7a369eb10b6d75d410d11">int</a> &gt; &amp;</td>          <td class="paramname"><span class="paramname"><em>numberOfCoalescedLocalParticlesPerVertex</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ParticleUnaryOperatorOnCell&lt; <a class="el" href="../../de/dd5/namespaceswift2_1_1kernels.html#a5209e6f1752aa3cc4110e64a35edf021">PCParticle</a>&lt; ParticleContainer &gt; &gt; auto</td>          <td class="paramname"><span class="paramname"><em>f</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/dd5/namespaceswift2_1_1kernels.html#a4e928bb2ae979528ac3ca42a470a69b4">UpdateParticleAssignedToCellPredicate</a>&lt; <a class="el" href="../../de/dd5/namespaceswift2_1_1kernels.html#a5209e6f1752aa3cc4110e64a35edf021">PCParticle</a>&lt; ParticleContainer &gt; &gt;</td>          <td class="paramname"><span class="paramname"><em>predicate</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Version of forAllParticles assuming chunks of coalesced memory. </p>
<p>Please consult the cousin routine in <a class="el" href="../../db/d2b/ParticleSetIterators_8h.html">swift2/kernels/ParticleSetIterators.h</a> for generic docu.</p>
<p>The routine accepts a container of pointers called assignedParticles. This is really just a sequence of pointers to particles on the heap and we can, for the generic baseline implementation in the namespace above, not make any assumptions on the order of the particles.</p>
<div class="image">
<img src="../../coalesced-memory.png" alt=""/>
</div>
<p>For this particular variant, we however know that there is some structure in the pointers. We know that it consists of chunks. In the example above, the first four particles on the heap are stored continuously. The next three are also stored en bloc, albeit maybe somewhere completely differently on the heap.</p>
<p>We exploit this knowledge by looping over the chunks identified by numberOfCoalescedLocalParticlesPerVertex in the outer loop. For each chunk, we can then use a plain for loop with pointer arithmetics similar to the techniques in <a class="el" href="#af22c637b771c7371f6f27ede3e6030b0" title="Version of forAllParticles assuming chunks of coalesced memory.">forAllParticles()</a>. This innermost loop should, in theory, be well-suited to vectorise. </p>

<p class="definition">Definition at line <a class="el" href="../../dd/d98/cppiterators_2ParticleSetIterators_8cpph_source.html#l00029">29</a> of file <a class="el" href="../../dd/d98/cppiterators_2ParticleSetIterators_8cpph_source.html">ParticleSetIterators.cpph</a>.</p>

</div>
</div>
<a id="af22c637b771c7371f6f27ede3e6030b0" name="af22c637b771c7371f6f27ede3e6030b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af22c637b771c7371f6f27ede3e6030b0">&#9670;&#160;</a></span>forAllParticles() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename ParticleContainer &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d4d/FaceIntegral_8template_8cpp.html#a7ce6528e12d0effe4d57054974659f90">void</a> swift2::kernels::coalesced::forAllParticles </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/df3/CustomRiemann_8template_8h.html#a92b303b76a3f942ea819498907d5e83c">const</a> <a class="el" href="../../dd/dc6/structpeano4_1_1datamanagement_1_1VertexMarker.html">peano4::datamanagement::VertexMarker</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>marker</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ParticleContainer &amp;</td>          <td class="paramname"><span class="paramname"><em>assignedParticles</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/d99/Prediction_8EnclaveTask_8template_8cpp.html#a61569f2965b7a369eb10b6d75d410d11">int</a></td>          <td class="paramname"><span class="paramname"><em>numberOfCoalescedAssignedParticles</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ParticleUnaryOperatorOnVertex&lt; typename ParticleContainer::DoFType &gt; auto</td>          <td class="paramname"><span class="paramname"><em>f</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/dd5/namespaceswift2_1_1kernels.html#a4e97079bcd13f3a21303ddcb8b5eb793">UpdateParticleAssignedToVertexPredicate</a>&lt; typename ParticleContainer::DoFType &gt;</td>          <td class="paramname"><span class="paramname"><em>predicate</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Version of forAllParticles assuming chunks of coalesced memory. </p>
<p>Please consult the cousin routine in <a class="el" href="../../db/d2b/ParticleSetIterators_8h.html">swift2/kernels/ParticleSetIterators.h</a> for generic docu.</p>
<p>The routine accepts a container of pointers called assignedParticles. This is really just a sequence of pointers to particles on the heap and we can, for the generic baseline implementation in the namespace above, not make any assumptions on the order of the particles.</p>
<p>For this particular variant, we however know that there is some structure in the particles, i.e. that assignedParticles actually hosts numberOfCoalescedAssignedParticles coalesced particles.</p>
<p>Instead of looping over the container, we can therefore take the address of the very first particle in the sequence, and then use a simple for loop with pointer arithmetics to traverse the whole sequence. </p>

<p class="definition">Definition at line <a class="el" href="../../dd/d98/cppiterators_2ParticleSetIterators_8cpph_source.html#l00010">10</a> of file <a class="el" href="../../dd/d98/cppiterators_2ParticleSetIterators_8cpph_source.html">ParticleSetIterators.cpph</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d66/BenchmarkDriver_8cpp_source.html#l00194">runBenchmark()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d7/da3/namespaceswift2_1_1kernels_1_1coalesced_af22c637b771c7371f6f27ede3e6030b0_icgraph.png" border="0" usemap="#ad7/da3/namespaceswift2_1_1kernels_1_1coalesced_af22c637b771c7371f6f27ede3e6030b0_icgraph" alt=""/></div>
<map name="ad7/da3/namespaceswift2_1_1kernels_1_1coalesced_af22c637b771c7371f6f27ede3e6030b0_icgraph" id="ad7/da3/namespaceswift2_1_1kernels_1_1coalesced_af22c637b771c7371f6f27ede3e6030b0_icgraph">
<area shape="rect" title="Version of forAllParticles assuming chunks of coalesced memory." alt="" coords="273,5,463,45"/>
<area shape="rect" href="../../de/d66/BenchmarkDriver_8cpp.html#ab62b2a3788115c3ba667e7d7ef98ceb7" title=" " alt="" coords="108,13,225,38"/>
<area shape="poly" title=" " alt="" coords="260,28,225,28,225,23,260,23"/>
<area shape="rect" href="../../de/d66/BenchmarkDriver_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title="Main routine of the SPH code." alt="" coords="5,13,60,38"/>
<area shape="poly" title=" " alt="" coords="94,28,60,28,60,23,94,23"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../de/dac/namespaceswift2.html">swift2</a></li><li class="navelem"><a class="el" href="../../de/dd5/namespaceswift2_1_1kernels.html">kernels</a></li><li class="navelem"><a class="el" href="../../d7/da3/namespaceswift2_1_1kernels_1_1coalesced.html">coalesced</a></li>
    <li class="footer">Generated on Tue Jul 1 2025 11:30:42 for Peano by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0 </li>
  </ul>
</div>
</body>
</html>
