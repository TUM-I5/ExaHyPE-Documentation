<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<link rel="icon" href="../../Peano-icon.png" type="image/x-icon" />
<title>Peano</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="../../doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript" src="../../doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript" src="../../doxygen-awesome-interactive-toc.js"></script>
<script type="text/javascript" src="../../doxygen-awesome-tabs.js"></script>
<script type="text/javascript" src="../../toggle-alternative-theme.js"></script>
<script type="text/javascript">
    DoxygenAwesomeFragmentCopyButton.init()
    DoxygenAwesomeDarkModeToggle.init()
    DoxygenAwesomeParagraphLink.init()
    DoxygenAwesomeInteractiveToc.init()
    DoxygenAwesomeTabs.init()
</script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="../../custom.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="../../custom-alternative.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- https://tholman.com/github-corners/ -->
<!-- https://bryce.io/gitlab-corners/ -->
<style>.gitlab-corner-wrapper{overflow:hidden;width:100px;height:100px;position:absolute;top:0;right:0}.gitlab-corner{position:absolute;top:-16px;right:-50px;transform:rotate(45deg);background:#333;border:44px solid #333;border-bottom:none;border-top:#333 solid 16px}.gitlab-corner svg{width:60px;height:60px;margin-bottom:-4px}.cls-1{fill:#fc6d26}.cls-2{fill:#e24329}.cls-3{fill:#fca326}.gitlab-corner:hover .cls-1{animation:cycle .6s}.gitlab-corner:hover .cls-2{animation:cycleMid .6s}.gitlab-corner:hover .cls-3{animation:cycleEnd .6s}@keyframes cycle{100%,15%,60%{fill:#fc6d26}30%,75%{fill:#e24329}45%,90%{fill:#fca326}}@keyframes cycleMid{100%,15%,60%{fill:#e24329}30%,75%{fill:#fca326}45%,90%{fill:#fc6d26}}@keyframes cycleEnd{100%,15%,60%{fill:#fca326}30%,75%{fill:#fc6d26}45%,90%{fill:#e24329}}@media (max-width:500px){.gitlab-corner:hover .cls-1,.gitlab-corner:hover .cls-2,.gitlab-corner:hover .cls-3{animation:none}.gitlab-corner .cls-1{animation:cycle .6s}.gitlab-corner .cls-2{animation:cycleMid .6s}.gitlab-corner .cls-3{animation:cycleEnd .6s}}</style><div class="gitlab-corner-wrapper"><a href="https://gitlab.lrz.de/hpcsoftware/Peano" class="gitlab-corner" aria-label="View source on GitLab"><svg id="logo_art" data-name="logo art" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 586 559"><g id="g44"><path id="path46" class="cls-1" d="M461.17,301.83l-18.91-58.12L404.84,128.43a6.47,6.47,0,0,0-12.27,0L355.15,243.64H230.82L193.4,128.43a6.46,6.46,0,0,0-12.26,0L143.78,243.64l-18.91,58.19a12.88,12.88,0,0,0,4.66,14.39L293,435,456.44,316.22a12.9,12.9,0,0,0,4.73-14.39"/></g><g id="g48"><path id="path50" class="cls-2" d="M293,434.91h0l62.16-191.28H230.87L293,434.91Z"/></g><g id="g56"><path id="path58" class="cls-1" d="M293,434.91,230.82,243.63h-87L293,434.91Z"/></g><g id="g64"><path id="path66" class="cls-3" d="M143.75,243.69h0l-18.91,58.12a12.88,12.88,0,0,0,4.66,14.39L293,435,143.75,243.69Z"/></g><g id="g72"><path id="path74" class="cls-2" d="M143.78,243.69h87.11L193.4,128.49a6.47,6.47,0,0,0-12.27,0l-37.35,115.2Z"/></g><g id="g76"><path id="path78" class="cls-1" d="M293,434.91l62.16-191.28H442.3L293,434.91Z"/></g><g id="g80"><path id="path82" class="cls-3" d="M442.24,243.69h0l18.91,58.12a12.85,12.85,0,0,1-4.66,14.39L293,434.91l149.2-191.22Z"/></g><g id="g84"><path id="path86" class="cls-2" d="M442.28,243.69h-87.1l37.42-115.2a6.46,6.46,0,0,1,12.26,0l37.42,115.2Z"/></g></svg></a></div>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../Peano-icon.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Peano
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('dd/d1f/documentation_tarch_visualisation_paraview.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">In-situ visualisation in Paraview</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Peano's postprocessing scripts use Python 3. This means you need a Paraview version with Python 3 support (oldish Paraview installations only support Python 2.7, and some Paraview downloads don't come along with Python support at al).</p>
<p>You can display Peano's patch files directly within Paraview. Again, there are different ways. For all of them, Peano's Python environment has to be available within Paraview: </p><pre class="fragment">      export PYTHONPATH=Peano-dir/python
</pre><p> Please consult the remarks on third party software on <a class="el" href="../../d7/d3c/page_faq_home.html">FAQs and Troubleshooting (User Perspective)</a> for further troubleshooting.</p>
<h1><a class="anchor" id="autotoc_md1188"></a>
Start Paraview's Python environment</h1>
<p>You can either manipulate all data directly within Paraview or use Paraview's Python terminal to convert data as a batch from Peano's native format into native Paraview data. I recommend the direct Paraview terminal route to interactively explore data. The actual data processing (of time-dependent data) however can be very slow. Once I know what information I need, I thus usually switch to Paraview's Python interpreter to convert all data into Paraview's native file formats in one rush.</p>
<div class="image">
<img src="../../paraview.png" alt=""/>
</div>
<p>For the batch mode, open the terminal <code>pvpython</code>. For the interactive GUI mode, open Paraview and activate the Python Shell by clicking the check box in the View menu.</p>
<p>Both visualisation routes first require you to load Peano's Python tools - either within the <code>pvpython</code> terminal or the Paraview Python window: </p><pre class="fragment">      import peano4.visualisation
</pre><h1><a class="anchor" id="autotoc_md1189"></a>
Work with a whole dataset</h1>
<p>Peano provides a Python class peano4.visualise.Visualiser which allows you to navigate through the whole data.</p>
<div class="fragment"><div class="line"><span class="keyword">import</span> peano4.visualisation</div>
<div class="line">visualiser = peano4.visualisation.Visualiser( ”solution-Euler.peano-patch-file” )</div>
<div class="line">visualiser.display()</div>
<div class="line">visualiser.append filter(peano4.visualisation.ExtractFineGridFilter())</div>
</div><!-- fragment --><p>The snippet displays the first dataset (time step) from a  data dump. Via</p>
<div class="fragment"><div class="line">visualiser.select dataset(10)</div>
<div class="line">visualiser.reload()</div>
</div><!-- fragment --><p>you can, for example, select the 11th data set and display this one.</p>
<p>Running through data sets (time steps) manually is cumbersome in many cases. We have not yet managed to integrate our Python-based, bespoke postprocessing into Paraview's video replay features, and we also experience that it is relatively slow. In such a case, it is more convenient to convert all data in one rush into Paraview's native, binary file format vtu:</p>
<div class="fragment"><div class="line">visualiser.write vtu time series()</div>
</div><!-- fragment --><p>Once this routine terminates, you'll find a file with the extension <code>.pvd</code> in your directory which you can open and play as video. Obviously, this conversion can be triggered in Paraview's Python interpreter which is typically faster than Paraview's built-in terminal.</p>
<p>You can trigger the Python postprocessing routines while the simulation is running.</p>
<h1><a class="anchor" id="autotoc_md1190"></a>
Display a single file</h1>
<p>Load the file you are interested in via</p>
<div class="fragment"><div class="line">data = <a class="code hl_namespace" href="../../d8/d8f/namespacepeano4.html">peano4</a>.<a class="code hl_namespace" href="../../d7/dcd/namespacepeano4_1_1visualisation.html">visualisation</a>.<a class="code hl_namespace" href="../../d0/d04/namespacepeano4_1_1visualisation_1_1render.html">render</a> single file( ”solution-Euler-tree-0-0.peano-patch-file”, identifier=”MyQName” )</div>
<div class="ttc" id="anamespacepeano4_1_1visualisation_1_1render_html"><div class="ttname"><a href="../../d0/d04/namespacepeano4_1_1visualisation_1_1render.html">peano4.visualisation.render</a></div><div class="ttdef"><b>Definition</b> <a href="../../d3/dba/render_8py_source.html#l00001">render.py:1</a></div></div>
<div class="ttc" id="anamespacepeano4_1_1visualisation_html"><div class="ttname"><a href="../../d7/dcd/namespacepeano4_1_1visualisation.html">peano4.visualisation</a></div><div class="ttdef"><b>Definition</b> <a href="../../d2/d0e/python_2peano4_2visualisation_2____init_____8py_source.html#l00001">__init__.py:1</a></div></div>
<div class="ttc" id="anamespacepeano4_html"><div class="ttname"><a href="../../d8/d8f/namespacepeano4.html">peano4</a></div><div class="ttdef"><b>Definition</b> <a href="../../df/d17/CellMarker_8h_source.html#l00014">CellMarker.h:14</a></div></div>
</div><!-- fragment --><p>This is only one snapshot file, i.e. one file written by one thread in one step. We can display the file with</p>
<div class="fragment"><div class="line">tp = TrivialProducer() </div>
<div class="line">tp.GetClientSideObject().SetOutput(data) </div>
<div class="line">Show(tp)</div>
</div><!-- fragment --><p>If we write large parallel files or time series, Peano will typically create one file like <code>solution-Euler.peano-patch-file</code> which links to all the files such as <code>solution-Euler-tree-0-0.peano-patch-file</code>. The meta file (with the links) is plain text, so you can study it via a text editor. Instead of picking a particular file, you can display a particular data set (snapshot) from the meta file:</p>
<div class="fragment"><div class="line"><span class="keyword">import</span> peano4.visualisation</div>
<div class="line">data = peano4.visualisation.render dataset( ”solution-Euler.peano-patch-file”, </div>
<div class="line">                                            display_as_tree=False,</div>
<div class="line">                                            filter=[peano4.visualisation.ExtractFineGridFilter()],</div>
<div class="line">                                            dataset_number=0, </div>
<div class="line">                                            identifier=”MyQName” )</div>
<div class="line">tp = TrivialProducer()</div>
<div class="line">tp.GetClientSideObject().SetOutput(data)</div>
<div class="line">Show(tp)</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md1191"></a>
Filters</h1>
<p>Peano's snapshots are relatively complex. In practice, you typically want to filter data before you pipe it into Paraview. The most popular filter is the one which eliminates the coarse grid levels: Peano holds all data in multiple resolution. If your code does not exploit this feature, you might not be interested in the coarser resolutions, so removing it makes sense.</p>
<p>There are more filters or you can write your own custom filters. Study the source code for further details. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../index.html">Peano</a></li><li class="navelem"><a class="el" href="../../dd/d46/page_tarch_home.html">Technical Architecture (tarch)</a></li><li class="navelem"><a class="el" href="../../df/d47/documentation_tarch_visualisation.html">Visualisation</a></li>
    <li class="footer">Generated on Tue Jul 1 2025 11:29:07 for Peano by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0 </li>
  </ul>
</div>
</body>
</html>
