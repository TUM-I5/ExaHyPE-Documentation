<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<link rel="icon" href="../../Peano-icon.png" type="image/x-icon" />
<title>Peano</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="../../doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript" src="../../doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript" src="../../doxygen-awesome-interactive-toc.js"></script>
<script type="text/javascript" src="../../doxygen-awesome-tabs.js"></script>
<script type="text/javascript" src="../../toggle-alternative-theme.js"></script>
<script type="text/javascript">
    DoxygenAwesomeFragmentCopyButton.init()
    DoxygenAwesomeDarkModeToggle.init()
    DoxygenAwesomeParagraphLink.init()
    DoxygenAwesomeInteractiveToc.init()
    DoxygenAwesomeTabs.init()
</script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="../../custom.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="../../custom-alternative.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- https://tholman.com/github-corners/ -->
<!-- https://bryce.io/gitlab-corners/ -->
<style>.gitlab-corner-wrapper{overflow:hidden;width:100px;height:100px;position:absolute;top:0;right:0}.gitlab-corner{position:absolute;top:-16px;right:-50px;transform:rotate(45deg);background:#333;border:44px solid #333;border-bottom:none;border-top:#333 solid 16px}.gitlab-corner svg{width:60px;height:60px;margin-bottom:-4px}.cls-1{fill:#fc6d26}.cls-2{fill:#e24329}.cls-3{fill:#fca326}.gitlab-corner:hover .cls-1{animation:cycle .6s}.gitlab-corner:hover .cls-2{animation:cycleMid .6s}.gitlab-corner:hover .cls-3{animation:cycleEnd .6s}@keyframes cycle{100%,15%,60%{fill:#fc6d26}30%,75%{fill:#e24329}45%,90%{fill:#fca326}}@keyframes cycleMid{100%,15%,60%{fill:#e24329}30%,75%{fill:#fca326}45%,90%{fill:#fc6d26}}@keyframes cycleEnd{100%,15%,60%{fill:#fca326}30%,75%{fill:#fc6d26}45%,90%{fill:#e24329}}@media (max-width:500px){.gitlab-corner:hover .cls-1,.gitlab-corner:hover .cls-2,.gitlab-corner:hover .cls-3{animation:none}.gitlab-corner .cls-1{animation:cycle .6s}.gitlab-corner .cls-2{animation:cycleMid .6s}.gitlab-corner .cls-3{animation:cycleEnd .6s}}</style><div class="gitlab-corner-wrapper"><a href="https://gitlab.lrz.de/hpcsoftware/Peano" class="gitlab-corner" aria-label="View source on GitLab"><svg id="logo_art" data-name="logo art" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 586 559"><g id="g44"><path id="path46" class="cls-1" d="M461.17,301.83l-18.91-58.12L404.84,128.43a6.47,6.47,0,0,0-12.27,0L355.15,243.64H230.82L193.4,128.43a6.46,6.46,0,0,0-12.26,0L143.78,243.64l-18.91,58.19a12.88,12.88,0,0,0,4.66,14.39L293,435,456.44,316.22a12.9,12.9,0,0,0,4.73-14.39"/></g><g id="g48"><path id="path50" class="cls-2" d="M293,434.91h0l62.16-191.28H230.87L293,434.91Z"/></g><g id="g56"><path id="path58" class="cls-1" d="M293,434.91,230.82,243.63h-87L293,434.91Z"/></g><g id="g64"><path id="path66" class="cls-3" d="M143.75,243.69h0l-18.91,58.12a12.88,12.88,0,0,0,4.66,14.39L293,435,143.75,243.69Z"/></g><g id="g72"><path id="path74" class="cls-2" d="M143.78,243.69h87.11L193.4,128.49a6.47,6.47,0,0,0-12.27,0l-37.35,115.2Z"/></g><g id="g76"><path id="path78" class="cls-1" d="M293,434.91l62.16-191.28H442.3L293,434.91Z"/></g><g id="g80"><path id="path82" class="cls-3" d="M442.24,243.69h0l18.91,58.12a12.85,12.85,0,0,1-4.66,14.39L293,434.91l149.2-191.22Z"/></g><g id="g84"><path id="path86" class="cls-2" d="M442.28,243.69h-87.1l37.42-115.2a6.46,6.46,0,0,1,12.26,0l37.42,115.2Z"/></g></svg></a></div>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../Peano-icon.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Peano
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('dc/d8f/classbenchmarks_1_1exahype2_1_1ccz4_1_1MulticoreOrchestration.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a>  </div>
  <div class="headertitle"><div class="title">benchmarks::exahype2::ccz4::MulticoreOrchestration Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Hard coded strategy for the single black hole setup.  
 <a href="#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="../../df/d23/MulticoreOrchestration_8h_source.html">MulticoreOrchestration.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for benchmarks::exahype2::ccz4::MulticoreOrchestration:</div>
<div class="dyncontent">
<div class="center"><img src="../../db/dca/classbenchmarks_1_1exahype2_1_1ccz4_1_1MulticoreOrchestration__inherit__graph.png" border="0" usemap="#abenchmarks_1_1exahype2_1_1ccz4_1_1MulticoreOrchestration_inherit__map" alt="Inheritance graph"/></div>
<map name="abenchmarks_1_1exahype2_1_1ccz4_1_1MulticoreOrchestration_inherit__map" id="abenchmarks_1_1exahype2_1_1ccz4_1_1MulticoreOrchestration_inherit__map">
<area shape="rect" title="Hard coded strategy for the single black hole setup." alt="" coords="7,93,223,133"/>
<area shape="rect" title=" " alt="" coords="5,5,224,45"/>
<area shape="poly" title=" " alt="" coords="117,59,117,93,112,93,112,59"/>
</map>
<center><span class="legend">[<a target="top" href="../../graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for benchmarks::exahype2::ccz4::MulticoreOrchestration:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d63/classbenchmarks_1_1exahype2_1_1ccz4_1_1MulticoreOrchestration__coll__graph.png" border="0" usemap="#abenchmarks_1_1exahype2_1_1ccz4_1_1MulticoreOrchestration_coll__map" alt="Collaboration graph"/></div>
<map name="abenchmarks_1_1exahype2_1_1ccz4_1_1MulticoreOrchestration_coll__map" id="abenchmarks_1_1exahype2_1_1ccz4_1_1MulticoreOrchestration_coll__map">
<area shape="rect" title="Hard coded strategy for the single black hole setup." alt="" coords="7,93,223,133"/>
<area shape="rect" title=" " alt="" coords="5,5,224,45"/>
<area shape="poly" title=" " alt="" coords="117,59,117,93,112,93,112,59"/>
</map>
<center><span class="legend">[<a target="top" href="../../graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ad5f2a3bdbf8d5166bf5ca3213834e07f" id="r_ad5f2a3bdbf8d5166bf5ca3213834e07f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad5f2a3bdbf8d5166bf5ca3213834e07f">MulticoreOrchestration</a> ()</td></tr>
<tr class="separator:ad5f2a3bdbf8d5166bf5ca3213834e07f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7433d7b2cf78364e352276d1ba605ac" id="r_ad7433d7b2cf78364e352276d1ba605ac"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad7433d7b2cf78364e352276d1ba605ac">~MulticoreOrchestration</a> ()=<a class="el" href="../../d3/d22/namespacebenchmarks.html#a80342f0345a2011cc288d5b13e41ca43">default</a></td></tr>
<tr class="separator:ad7433d7b2cf78364e352276d1ba605ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e2986aeff6aaa3c695810db0000af92" id="r_a4e2986aeff6aaa3c695810db0000af92"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="../../d9/d4d/FaceIntegral_8template_8cpp.html#a7ce6528e12d0effe4d57054974659f90">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4e2986aeff6aaa3c695810db0000af92">startBSPSection</a> (<a class="el" href="../../d3/d22/namespacebenchmarks.html#ac65625ec69a385630013c8334a40fe93">int</a> nestedParallelismLevel) override</td></tr>
<tr class="memdesc:a4e2986aeff6aaa3c695810db0000af92"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start a fork/join section.  <br /></td></tr>
<tr class="separator:a4e2986aeff6aaa3c695810db0000af92"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b31edda4aefae24d3b9b94736c59ecc" id="r_a9b31edda4aefae24d3b9b94736c59ecc"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="../../d9/d4d/FaceIntegral_8template_8cpp.html#a7ce6528e12d0effe4d57054974659f90">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9b31edda4aefae24d3b9b94736c59ecc">endBSPSection</a> (<a class="el" href="../../d3/d22/namespacebenchmarks.html#ac65625ec69a385630013c8334a40fe93">int</a> nestedParallelismLevel) override</td></tr>
<tr class="memdesc:a9b31edda4aefae24d3b9b94736c59ecc"><td class="mdescLeft">&#160;</td><td class="mdescRight">End fork/join section.  <br /></td></tr>
<tr class="separator:a9b31edda4aefae24d3b9b94736c59ecc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0442d34895afefd6c529221c3093d03" id="r_ac0442d34895afefd6c529221c3093d03"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="../../d3/d22/namespacebenchmarks.html#ac65625ec69a385630013c8334a40fe93">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac0442d34895afefd6c529221c3093d03">getNumberOfTasksToHoldBack</a> (<a class="el" href="../../d3/d22/namespacebenchmarks.html#ac65625ec69a385630013c8334a40fe93">int</a> taskType) override</td></tr>
<tr class="memdesc:ac0442d34895afefd6c529221c3093d03"><td class="mdescLeft">&#160;</td><td class="mdescRight">How many tasks should be held back.  <br /></td></tr>
<tr class="separator:ac0442d34895afefd6c529221c3093d03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d73a65982c4e1b12686cf20c690745f" id="r_a9d73a65982c4e1b12686cf20c690745f"><td class="memItemLeft" align="right" valign="top">virtual FuseInstruction&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9d73a65982c4e1b12686cf20c690745f">getNumberOfTasksToFuseAndTargetDevice</a> (<a class="el" href="../../d3/d22/namespacebenchmarks.html#ac65625ec69a385630013c8334a40fe93">int</a> taskType) override</td></tr>
<tr class="memdesc:a9d73a65982c4e1b12686cf20c690745f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Ensure right cardinality ends up on GPU.  <br /></td></tr>
<tr class="separator:a9d73a65982c4e1b12686cf20c690745f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ad3afdc6e69d9f3e198291403cf0b27" id="r_a2ad3afdc6e69d9f3e198291403cf0b27"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="../../d1/d8b/SWIFTMain_8template_8cpp.html#af6a258d8f3ee5206d682d799316314b1">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2ad3afdc6e69d9f3e198291403cf0b27">fuseTasksImmediatelyWhenSpawned</a> (<a class="el" href="../../d3/d22/namespacebenchmarks.html#ac65625ec69a385630013c8334a40fe93">int</a> taskType) override</td></tr>
<tr class="memdesc:a2ad3afdc6e69d9f3e198291403cf0b27"><td class="mdescLeft">&#160;</td><td class="mdescRight">Ensure Finite Volume tasks end up on GPU asap.  <br /></td></tr>
<tr class="separator:a2ad3afdc6e69d9f3e198291403cf0b27"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab63380cd20b661cdb95eb9ca1b8c3610" id="r_ab63380cd20b661cdb95eb9ca1b8c3610"><td class="memItemLeft" align="right" valign="top">virtual ExecutionPolicy&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab63380cd20b661cdb95eb9ca1b8c3610">paralleliseForkJoinSection</a> (<a class="el" href="../../d3/d22/namespacebenchmarks.html#ac65625ec69a385630013c8334a40fe93">int</a> nestedParallelismLevel, <a class="el" href="../../d3/d22/namespacebenchmarks.html#ac65625ec69a385630013c8334a40fe93">int</a> numberOfTasks, <a class="el" href="../../d3/d22/namespacebenchmarks.html#ac65625ec69a385630013c8334a40fe93">int</a> taskType) override</td></tr>
<tr class="memdesc:ab63380cd20b661cdb95eb9ca1b8c3610"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determine how to parallelise a fork/join section.  <br /></td></tr>
<tr class="separator:ab63380cd20b661cdb95eb9ca1b8c3610"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a3457a7b13d0845cb406a84c0eab84afd" id="r_a3457a7b13d0845cb406a84c0eab84afd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/d22/namespacebenchmarks.html#ac65625ec69a385630013c8334a40fe93">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3457a7b13d0845cb406a84c0eab84afd">_nestedBSPLevels</a></td></tr>
<tr class="memdesc:a3457a7b13d0845cb406a84c0eab84afd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of nested fork/join levels.  <br /></td></tr>
<tr class="separator:a3457a7b13d0845cb406a84c0eab84afd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0708372f8f85d32e70862aed04127fe" id="r_ab0708372f8f85d32e70862aed04127fe"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/d22/namespacebenchmarks.html#ac65625ec69a385630013c8334a40fe93">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab0708372f8f85d32e70862aed04127fe">_maxFiniteVolumeTasks</a></td></tr>
<tr class="memdesc:ab0708372f8f85d32e70862aed04127fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum number of finite volume tasks in the system.  <br /></td></tr>
<tr class="separator:ab0708372f8f85d32e70862aed04127fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f9f61ea9e65432c504db632a36f2393" id="r_a0f9f61ea9e65432c504db632a36f2393"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/d22/namespacebenchmarks.html#ac65625ec69a385630013c8334a40fe93">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0f9f61ea9e65432c504db632a36f2393">_finiteVolumeTasksInThisBSPSection</a></td></tr>
<tr class="memdesc:a0f9f61ea9e65432c504db632a36f2393"><td class="mdescLeft">&#160;</td><td class="mdescRight">Current number of finite volume tasks that already have been spawned.  <br /></td></tr>
<tr class="separator:a0f9f61ea9e65432c504db632a36f2393"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Hard coded strategy for the single black hole setup. </p>
<p>The single black hole setup is fixed setup, where we have a large domain covered by higher order patches plus a small area in the centre which is covered by Finite Volumes. The latter are very compute heavy and hence quickly become the bottleneck. So we have to process them as soon as possible. We could realise this by giving those tasks a higher priority than all other tasks, but I actually prefer to realise all scheduling within this orchestration object. Certainly, priorities might do a fine job as well.</p>
<h2><a class="anchor" id="autotoc_md684"></a>
Behaviour</h2>
<ul>
<li>The mesh can be rather complicated with AMR, and the inclusion of Finite Volume outcomes hence might be expensive. So we want to have all enclave tasks computed by the end of the first sweep if possible.</li>
<li>Each FV patch makes an object well-suited for a GPU. If there is an accelerator, we offload immediately.</li>
<li>If there is accelerator, we map each FV patch immediately to a proper task.</li>
<li>All other tasks are held back yet mapped onto proper tasks after the producing BSP section has terminated or until we know that all the Finite Volume tasks are out.</li>
</ul>
<h2><a class="anchor" id="autotoc_md685"></a>
Realisation</h2>
<p>I hijack <a class="el" href="#ac0442d34895afefd6c529221c3093d03" title="How many tasks should be held back.">getNumberOfTasksToHoldBack()</a> to keep track of the total number of enclave tasks. This is a constant here, so I can derive it via a max function and I know that the right value will be in there after the first grid sweep.</p>
<p>The "magic" happens in <a class="el" href="#ac0442d34895afefd6c529221c3093d03" title="How many tasks should be held back.">getNumberOfTasksToHoldBack()</a> and the documentation of this rule provides some further details.</p>
<p>We disable any nested parallelism. See <a class="el" href="#ab63380cd20b661cdb95eb9ca1b8c3610" title="Determine how to parallelise a fork/join section.">paralleliseForkJoinSection()</a>'s documentation. </p>

<p class="definition">Definition at line <a class="el" href="../../df/d23/MulticoreOrchestration_8h_source.html#l00055">55</a> of file <a class="el" href="../../df/d23/MulticoreOrchestration_8h_source.html">MulticoreOrchestration.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ad5f2a3bdbf8d5166bf5ca3213834e07f" name="ad5f2a3bdbf8d5166bf5ca3213834e07f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad5f2a3bdbf8d5166bf5ca3213834e07f">&#9670;&#160;</a></span>MulticoreOrchestration()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">benchmarks::exahype2::ccz4::MulticoreOrchestration::MulticoreOrchestration </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d53/MulticoreOrchestration_8cpp_source.html#l00018">18</a> of file <a class="el" href="../../dc/d53/MulticoreOrchestration_8cpp_source.html">MulticoreOrchestration.cpp</a>.</p>

</div>
</div>
<a id="ad7433d7b2cf78364e352276d1ba605ac" name="ad7433d7b2cf78364e352276d1ba605ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad7433d7b2cf78364e352276d1ba605ac">&#9670;&#160;</a></span>~MulticoreOrchestration()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual benchmarks::exahype2::ccz4::MulticoreOrchestration::~MulticoreOrchestration </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a9b31edda4aefae24d3b9b94736c59ecc" name="a9b31edda4aefae24d3b9b94736c59ecc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9b31edda4aefae24d3b9b94736c59ecc">&#9670;&#160;</a></span>endBSPSection()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d4d/FaceIntegral_8template_8cpp.html#a7ce6528e12d0effe4d57054974659f90">void</a> benchmarks::exahype2::ccz4::MulticoreOrchestration::endBSPSection </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d22/namespacebenchmarks.html#ac65625ec69a385630013c8334a40fe93">int</a></td>          <td class="paramname"><span class="paramname"><em>nestedParallelismLevel</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>End fork/join section. </p>
<p>Decrement the counter _nestedBSPLevels. If the outermost parallel region joins, we can update _maxFiniteVolumeTasks.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="#ab63380cd20b661cdb95eb9ca1b8c3610" title="Determine how to parallelise a fork/join section.">paralleliseForkJoinSection()</a> which uses the nested parallelism counter. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dc/d53/MulticoreOrchestration_8cpp_source.html#l00032">32</a> of file <a class="el" href="../../dc/d53/MulticoreOrchestration_8cpp_source.html">MulticoreOrchestration.cpp</a>.</p>

</div>
</div>
<a id="a2ad3afdc6e69d9f3e198291403cf0b27" name="a2ad3afdc6e69d9f3e198291403cf0b27"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ad3afdc6e69d9f3e198291403cf0b27">&#9670;&#160;</a></span>fuseTasksImmediatelyWhenSpawned()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d1/d8b/SWIFTMain_8template_8cpp.html#af6a258d8f3ee5206d682d799316314b1">bool</a> benchmarks::exahype2::ccz4::MulticoreOrchestration::fuseTasksImmediatelyWhenSpawned </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d22/namespacebenchmarks.html#ac65625ec69a385630013c8334a40fe93">int</a></td>          <td class="paramname"><span class="paramname"><em>taskType</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Ensure Finite Volume tasks end up on GPU asap. </p>
<p>Always true as we want to get the Finite Volume tasks to the accelerator as soon as possible. All other tasks might remain on the CPU or not. Here, it makes no big difference. </p>

<p class="definition">Definition at line <a class="el" href="../../dc/d53/MulticoreOrchestration_8cpp_source.html#l00075">75</a> of file <a class="el" href="../../dc/d53/MulticoreOrchestration_8cpp_source.html">MulticoreOrchestration.cpp</a>.</p>

</div>
</div>
<a id="a9d73a65982c4e1b12686cf20c690745f" name="a9d73a65982c4e1b12686cf20c690745f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d73a65982c4e1b12686cf20c690745f">&#9670;&#160;</a></span>getNumberOfTasksToFuseAndTargetDevice()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">benchmarks::exahype2::ccz4::MulticoreOrchestration::FuseInstruction benchmarks::exahype2::ccz4::MulticoreOrchestration::getNumberOfTasksToFuseAndTargetDevice </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d22/namespacebenchmarks.html#ac65625ec69a385630013c8334a40fe93">int</a></td>          <td class="paramname"><span class="paramname"><em>taskType</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Ensure right cardinality ends up on GPU. </p>
<p>If we hae a Finite Volume task, we send it off to the GPU immediately. If we have FD4 tasks, we wait until we have 16 of them and then send them off. The 16 is arbitrary. I just needed one number. </p>

<p class="definition">Definition at line <a class="el" href="../../dc/d53/MulticoreOrchestration_8cpp_source.html#l00058">58</a> of file <a class="el" href="../../dc/d53/MulticoreOrchestration_8cpp_source.html">MulticoreOrchestration.cpp</a>.</p>

</div>
</div>
<a id="ac0442d34895afefd6c529221c3093d03" name="ac0442d34895afefd6c529221c3093d03"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac0442d34895afefd6c529221c3093d03">&#9670;&#160;</a></span>getNumberOfTasksToHoldBack()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d22/namespacebenchmarks.html#ac65625ec69a385630013c8334a40fe93">int</a> benchmarks::exahype2::ccz4::MulticoreOrchestration::getNumberOfTasksToHoldBack </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d22/namespacebenchmarks.html#ac65625ec69a385630013c8334a40fe93">int</a></td>          <td class="paramname"><span class="paramname"><em>taskType</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>How many tasks should be held back. </p>
<p>If we have a GPU and we are given a FV task, we hold it back, as we know that <a class="el" href="#a2ad3afdc6e69d9f3e198291403cf0b27" title="Ensure Finite Volume tasks end up on GPU asap.">fuseTasksImmediatelyWhenSpawned(int taskType)</a> yields true immediately and we hence offload. If there is no GPU, we map FV tasks onto proper tasks immediately.</p>
<p>The routine is basically where the magic happens and where the logic of the class description is realised. </p>

<p class="definition">Definition at line <a class="el" href="../../dc/d53/MulticoreOrchestration_8cpp_source.html#l00039">39</a> of file <a class="el" href="../../dc/d53/MulticoreOrchestration_8cpp_source.html">MulticoreOrchestration.cpp</a>.</p>

<p class="reference">References <a class="el" href="../../d2/dc0/Device_8cpp_source.html#l00013">tarch::accelerator::Device::getInstance()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dc/d8f/classbenchmarks_1_1exahype2_1_1ccz4_1_1MulticoreOrchestration_ac0442d34895afefd6c529221c3093d03_cgraph.png" border="0" usemap="#adc/d8f/classbenchmarks_1_1exahype2_1_1ccz4_1_1MulticoreOrchestration_ac0442d34895afefd6c529221c3093d03_cgraph" alt=""/></div>
<map name="adc/d8f/classbenchmarks_1_1exahype2_1_1ccz4_1_1MulticoreOrchestration_ac0442d34895afefd6c529221c3093d03_cgraph" id="adc/d8f/classbenchmarks_1_1exahype2_1_1ccz4_1_1MulticoreOrchestration_ac0442d34895afefd6c529221c3093d03_cgraph">
<area shape="rect" title="How many tasks should be held back." alt="" coords="5,5,236,60"/>
<area shape="rect" href="../../dd/d49/classtarch_1_1accelerator_1_1Device.html#aefd4f8359aa72c359eb93d40078f7315" title=" " alt="" coords="284,13,443,53"/>
<area shape="poly" title=" " alt="" coords="236,30,270,30,270,35,236,35"/>
</map>
</div>

</div>
</div>
<a id="ab63380cd20b661cdb95eb9ca1b8c3610" name="ab63380cd20b661cdb95eb9ca1b8c3610"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab63380cd20b661cdb95eb9ca1b8c3610">&#9670;&#160;</a></span>paralleliseForkJoinSection()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">tarch::multicore::orchestration::Strategy::ExecutionPolicy benchmarks::exahype2::ccz4::MulticoreOrchestration::paralleliseForkJoinSection </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d22/namespacebenchmarks.html#ac65625ec69a385630013c8334a40fe93">int</a></td>          <td class="paramname"><span class="paramname"><em>nestedParallelismLevel</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d22/namespacebenchmarks.html#ac65625ec69a385630013c8334a40fe93">int</a></td>          <td class="paramname"><span class="paramname"><em>numberOfTasks</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d22/namespacebenchmarks.html#ac65625ec69a385630013c8334a40fe93">int</a></td>          <td class="paramname"><span class="paramname"><em>taskType</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Determine how to parallelise a fork/join section. </p>
<p>I found nested parallelism to be brutally slow, so I always return tarch::multicore::orchestration::Strategy::ExecutionPolicy::RunSerially if more than one parallel level is embedded into each other. Otherwise, I'm happy for a section to be processed in parallel. </p>

<p class="definition">Definition at line <a class="el" href="../../dc/d53/MulticoreOrchestration_8cpp_source.html#l00079">79</a> of file <a class="el" href="../../dc/d53/MulticoreOrchestration_8cpp_source.html">MulticoreOrchestration.cpp</a>.</p>

</div>
</div>
<a id="a4e2986aeff6aaa3c695810db0000af92" name="a4e2986aeff6aaa3c695810db0000af92"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e2986aeff6aaa3c695810db0000af92">&#9670;&#160;</a></span>startBSPSection()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d4d/FaceIntegral_8template_8cpp.html#a7ce6528e12d0effe4d57054974659f90">void</a> benchmarks::exahype2::ccz4::MulticoreOrchestration::startBSPSection </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d22/namespacebenchmarks.html#ac65625ec69a385630013c8334a40fe93">int</a></td>          <td class="paramname"><span class="paramname"><em>nestedParallelismLevel</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Start a fork/join section. </p>
<p>Reset _finiteVolumeTasksInThisBSPSection is this is the start of the outermost parallel region.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="#ab63380cd20b661cdb95eb9ca1b8c3610" title="Determine how to parallelise a fork/join section.">paralleliseForkJoinSection()</a> which uses the nested parallelism counter. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dc/d53/MulticoreOrchestration_8cpp_source.html#l00024">24</a> of file <a class="el" href="../../dc/d53/MulticoreOrchestration_8cpp_source.html">MulticoreOrchestration.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Field Documentation</h2>
<a id="a0f9f61ea9e65432c504db632a36f2393" name="a0f9f61ea9e65432c504db632a36f2393"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0f9f61ea9e65432c504db632a36f2393">&#9670;&#160;</a></span>_finiteVolumeTasksInThisBSPSection</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d22/namespacebenchmarks.html#ac65625ec69a385630013c8334a40fe93">int</a> benchmarks::exahype2::ccz4::MulticoreOrchestration::_finiteVolumeTasksInThisBSPSection</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Current number of finite volume tasks that already have been spawned. </p>

<p class="definition">Definition at line <a class="el" href="../../df/d23/MulticoreOrchestration_8h_source.html#l00075">75</a> of file <a class="el" href="../../df/d23/MulticoreOrchestration_8h_source.html">MulticoreOrchestration.h</a>.</p>

</div>
</div>
<a id="ab0708372f8f85d32e70862aed04127fe" name="ab0708372f8f85d32e70862aed04127fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab0708372f8f85d32e70862aed04127fe">&#9670;&#160;</a></span>_maxFiniteVolumeTasks</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d22/namespacebenchmarks.html#ac65625ec69a385630013c8334a40fe93">int</a> benchmarks::exahype2::ccz4::MulticoreOrchestration::_maxFiniteVolumeTasks</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Maximum number of finite volume tasks in the system. </p>
<p>I don't use this value at the moment, but might want to use it for GPUs.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="#a4e2986aeff6aaa3c695810db0000af92" title="Start a fork/join section.">startBSPSection()</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../df/d23/MulticoreOrchestration_8h_source.html#l00070">70</a> of file <a class="el" href="../../df/d23/MulticoreOrchestration_8h_source.html">MulticoreOrchestration.h</a>.</p>

</div>
</div>
<a id="a3457a7b13d0845cb406a84c0eab84afd" name="a3457a7b13d0845cb406a84c0eab84afd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3457a7b13d0845cb406a84c0eab84afd">&#9670;&#160;</a></span>_nestedBSPLevels</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d22/namespacebenchmarks.html#ac65625ec69a385630013c8334a40fe93">int</a> benchmarks::exahype2::ccz4::MulticoreOrchestration::_nestedBSPLevels</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Number of nested fork/join levels. </p>
<p>Important for <a class="el" href="#ab63380cd20b661cdb95eb9ca1b8c3610" title="Determine how to parallelise a fork/join section.">paralleliseForkJoinSection()</a> to decide if the parallel region should actually be processed concurrently. </p>

<p class="definition">Definition at line <a class="el" href="../../df/d23/MulticoreOrchestration_8h_source.html#l00062">62</a> of file <a class="el" href="../../df/d23/MulticoreOrchestration_8h_source.html">MulticoreOrchestration.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>benchmarks/exahype2/ccz4/single-black-hole/<a class="el" href="../../df/d23/MulticoreOrchestration_8h_source.html">MulticoreOrchestration.h</a></li>
<li>benchmarks/exahype2/ccz4/single-black-hole/<a class="el" href="../../dc/d53/MulticoreOrchestration_8cpp_source.html">MulticoreOrchestration.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../d3/d22/namespacebenchmarks.html">benchmarks</a></li><li class="navelem"><a class="el" href="../../d5/d86/namespacebenchmarks_1_1exahype2.html">exahype2</a></li><li class="navelem"><a class="el" href="../../d2/d5a/namespacebenchmarks_1_1exahype2_1_1ccz4.html">ccz4</a></li><li class="navelem"><a class="el" href="../../dc/d8f/classbenchmarks_1_1exahype2_1_1ccz4_1_1MulticoreOrchestration.html">MulticoreOrchestration</a></li>
    <li class="footer">Generated on Tue Jul 1 2025 11:29:20 for Peano by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0 </li>
  </ul>
</div>
</body>
</html>
