<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<link rel="icon" href="../../Peano-icon.png" type="image/x-icon" />
<title>Peano</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="../../doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript" src="../../doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript" src="../../doxygen-awesome-interactive-toc.js"></script>
<script type="text/javascript" src="../../doxygen-awesome-tabs.js"></script>
<script type="text/javascript" src="../../toggle-alternative-theme.js"></script>
<script type="text/javascript">
    DoxygenAwesomeFragmentCopyButton.init()
    DoxygenAwesomeDarkModeToggle.init()
    DoxygenAwesomeParagraphLink.init()
    DoxygenAwesomeInteractiveToc.init()
    DoxygenAwesomeTabs.init()
</script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="../../custom.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="../../custom-alternative.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- https://tholman.com/github-corners/ -->
<!-- https://bryce.io/gitlab-corners/ -->
<style>.gitlab-corner-wrapper{overflow:hidden;width:100px;height:100px;position:absolute;top:0;right:0}.gitlab-corner{position:absolute;top:-16px;right:-50px;transform:rotate(45deg);background:#333;border:44px solid #333;border-bottom:none;border-top:#333 solid 16px}.gitlab-corner svg{width:60px;height:60px;margin-bottom:-4px}.cls-1{fill:#fc6d26}.cls-2{fill:#e24329}.cls-3{fill:#fca326}.gitlab-corner:hover .cls-1{animation:cycle .6s}.gitlab-corner:hover .cls-2{animation:cycleMid .6s}.gitlab-corner:hover .cls-3{animation:cycleEnd .6s}@keyframes cycle{100%,15%,60%{fill:#fc6d26}30%,75%{fill:#e24329}45%,90%{fill:#fca326}}@keyframes cycleMid{100%,15%,60%{fill:#e24329}30%,75%{fill:#fca326}45%,90%{fill:#fc6d26}}@keyframes cycleEnd{100%,15%,60%{fill:#fca326}30%,75%{fill:#fc6d26}45%,90%{fill:#e24329}}@media (max-width:500px){.gitlab-corner:hover .cls-1,.gitlab-corner:hover .cls-2,.gitlab-corner:hover .cls-3{animation:none}.gitlab-corner .cls-1{animation:cycle .6s}.gitlab-corner .cls-2{animation:cycleMid .6s}.gitlab-corner .cls-3{animation:cycleEnd .6s}}</style><div class="gitlab-corner-wrapper"><a href="https://gitlab.lrz.de/hpcsoftware/Peano" class="gitlab-corner" aria-label="View source on GitLab"><svg id="logo_art" data-name="logo art" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 586 559"><g id="g44"><path id="path46" class="cls-1" d="M461.17,301.83l-18.91-58.12L404.84,128.43a6.47,6.47,0,0,0-12.27,0L355.15,243.64H230.82L193.4,128.43a6.46,6.46,0,0,0-12.26,0L143.78,243.64l-18.91,58.19a12.88,12.88,0,0,0,4.66,14.39L293,435,456.44,316.22a12.9,12.9,0,0,0,4.73-14.39"/></g><g id="g48"><path id="path50" class="cls-2" d="M293,434.91h0l62.16-191.28H230.87L293,434.91Z"/></g><g id="g56"><path id="path58" class="cls-1" d="M293,434.91,230.82,243.63h-87L293,434.91Z"/></g><g id="g64"><path id="path66" class="cls-3" d="M143.75,243.69h0l-18.91,58.12a12.88,12.88,0,0,0,4.66,14.39L293,435,143.75,243.69Z"/></g><g id="g72"><path id="path74" class="cls-2" d="M143.78,243.69h87.11L193.4,128.49a6.47,6.47,0,0,0-12.27,0l-37.35,115.2Z"/></g><g id="g76"><path id="path78" class="cls-1" d="M293,434.91l62.16-191.28H442.3L293,434.91Z"/></g><g id="g80"><path id="path82" class="cls-3" d="M442.24,243.69h0l18.91,58.12a12.85,12.85,0,0,1-4.66,14.39L293,434.91l149.2-191.22Z"/></g><g id="g84"><path id="path86" class="cls-2" d="M442.28,243.69h-87.1l37.42-115.2a6.46,6.46,0,0,1,12.26,0l37.42,115.2Z"/></g></svg></a></div>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../Peano-icon.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Peano
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('d2/d2d/page_exahype_visualisation.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Visualisation and output</div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md918">Visualise the patch files</a></li>
<li class="level1"><a href="#autotoc_md919">Solution output</a><ul><li class="level2"><a href="#autotoc_md920">Plot descriptive variable names</a></li>
<li class="level2"><a href="#autotoc_md921">Output filters</a></li>
<li class="level2"><a href="#autotoc_md922">Output directory</a></li>
<li class="level2"><a href="#autotoc_md923">Multiscale data</a></li>
</ul>
</li>
<li class="level1"><a href="#autotoc_md924">Solver-specific rendering recommendations</a><ul><li class="level2"><a href="#autotoc_md925">Finite Volumes</a></li>
<li class="level2"><a href="#autotoc_md926">Discontinuous Galerkin</a></li>
</ul>
</li>
<li class="level1"><a href="#autotoc_md927">Logging</a></li>
</ul>
</div>
<div class="textblock"><p>ExaHyPE 2 relies on Peano's standard output routines to write file dumps, and it employs Peano's standard terminal routines to dump runtime information. Further to that, you can enable <a class="el" href="../../d1/d9e/tarch_logging.html">Peano's statistics</a> if you require more in-depth (profile) information.</p>
<h1><a class="anchor" id="autotoc_md918"></a>
Visualise the patch files</h1>
<p>Consult <a class="el" href="../../df/d47/documentation_tarch_visualisation.html">Peano's generic discussion</a> of various visualisation pathways as well as the patch file format.</p>
<h1><a class="anchor" id="autotoc_md919"></a>
Solution output</h1>
<p>As the files can be rather large, the simulation configuration allows you to specify exactly how often you want to see file dumps, and you can also add spatial filters. The latter help you to visualise only subdomains. As we rely on Peano's infrastructure, you can use the scripts from <a class="el" href="../../df/d47/documentation_tarch_visualisation.html">Visualisation</a> to convert the output files into vtu files.</p>
<p>By default, ExaHyPE dumps all data as one large vector Q per Finite Volume/integration point, i.e. you get a set of scalars. It also dumps all the resolution levels of the grid simultaneously. Therefore, one of the first postprocessing steps usually is to remove all data from the output data set besides the fine grid level.</p>
<h2><a class="anchor" id="autotoc_md920"></a>
Plot descriptive variable names</h2>
<p>You can add a plot description to each solver which allows us to render more descriptive variable names: </p><div class="fragment"><div class="line">my_solver.plot_description = <span class="stringliteral">&quot;density, velocity_x, velocity_y, energy&quot;</span></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md921"></a>
Output filters</h2>
<p>By default, ExaHyPE maps each Finite Volume and each DG quadrature point onto a vertex in the output file, i.e., it maps the compute mesh onto an unstructured (visualisation) mesh. This can result in large data dumps.</p>
<p>Peano follows the philosophy that postprocessing should be done by postprocessing tools. While Peano's render script provides a filter such that you see only the patch or cell average, each dump of the whole simulation data might already be too heavy for many applications. Therefore, you can add filters. They restrict the memory footprint a priori. A further obvious strategy to bring the memory footprint down is to print less often.</p>
<p>Filters can be added to your setup via</p>
<div class="fragment"><div class="line">probe_point = [0,0.693,0]</div>
<div class="line">project.add_plot_filter( probe_point,[0.0,0.0,0.0],1 )</div>
<div class="line">project.add_plot_filter( offset,size,10 )</div>
</div><!-- fragment --><p>The example above sets a probe, i.e. every plot step only the patch data around the probe is dumped. Every 10 snapshot steps however, the whole domain is written. I assume that offset and size are configured accordingly.</p>
<p>Further to the filters, each solver has an attribute select_dofs_to_print. It is set to <code>None</code>` by default which means that all quantities per degree of freedom are dumped into the output. You can pick only a few entries though via</p>
<div class="fragment"><div class="line">my_solver.select_dofs_to_print = [4,5,8]</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md922"></a>
Output directory</h2>
<p>The command</p>
<div class="fragment"><div class="line">project.set_output_path( <span class="stringliteral">&quot;/scratch/myfolder&quot;</span> )</div>
</div><!-- fragment --><p>configures Peano with a proper output path. Without this command, all output data is written to the working path.</p>
<h2><a class="anchor" id="autotoc_md923"></a>
Multiscale data</h2>
<p>All Peano 4 output files dump various resolutions of the data. ExaHyPE 2 atm however does only use the finest mesh resolution to compute something. The coarser levels hence hold garbage. I therefore strongly recommend that you always run the render script with the option <code>-filter-fine-grid</code>. This makes the script throw away all coarser resolutions.</p>
<h1><a class="anchor" id="autotoc_md924"></a>
Solver-specific rendering recommendations</h1>
<h2><a class="anchor" id="autotoc_md925"></a>
Finite Volumes</h2>
<p>If you dump Finite Volume data, it becomes difficult to spot how the resulting Finite Volumes are organised in patches: The organisation in patches is not visible unless you study AMR resolution boundaries. If you are interested in seeing the patch boundaries, use the </p><div class="fragment"><div class="line">--shrink-cells</div>
</div><!-- fragment --><p> option and pass in a value that is smaller than one. You then will see gaps (voids) between the individual patches.</p>
<h2><a class="anchor" id="autotoc_md926"></a>
Discontinuous Galerkin</h2>
<p>If you use ExaHyPE's Discontinuous Galerkin solvers with non-Lobatto nodes, the file dumps will look pretty ragged. This is due to the fact that the DG quadrature points are not placed on the cell faces. This might be unsatisfying and make some postprocessing (isolines, e.g.) difficult, but we found it important to display the actual spatial arrangement of the unknowns.</p>
<p>The standard postprocessing scripts allow you to rescale individual cells. Use <code>--shrink-cells</code> with a value slightly bigger than one to spread out the quadrature points. It is important to note that the shrinking distorts the actual physical layout of the quadrature points, i.e.~the output will not really reflect the solution anymore. Alternatively, you can averaging over cells and display only the average. Consult the script's help.</p>
<h1><a class="anchor" id="autotoc_md927"></a>
Logging</h1>
<p>ExaHyPE searches for a text file exahype.log-filter in the working directory. If no such file is found (or the file is corrupted), then it will use some default filter rules, i.e. dump the information to the terminal that I consider to be most important. If you want to adopt the output, I strongly recommend that you add a log filter configuration file.</p>
<p>Often, users are only interested in a particular phase of the simulation or want to specify different log entries per program phase. The program phases offered by default are</p>
<ul>
<li>create-grid-but-postpone-refinement</li>
<li>create-grid</li>
<li>create-grid-and-converge-load-balancing</li>
<li>init-grid</li>
<li>plot-solution</li>
<li>time-step</li>
</ul>
<p>The syntax of log filter files is discussed in the <a class="el" href="../../d1/d9e/tarch_logging.html">generic logging documentation of Peano</a>. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../index.html">Peano</a></li><li class="navelem"><a class="el" href="../../d3/d82/page_exahype2_home.html">ExaHyPE 2</a></li>
    <li class="footer">Generated on Tue Jul 1 2025 11:29:04 for Peano by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0 </li>
  </ul>
</div>
</body>
</html>
