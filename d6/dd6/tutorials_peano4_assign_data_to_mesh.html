<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<link rel="icon" href="../../Peano-icon.png" type="image/x-icon" />
<title>Peano</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="../../doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript" src="../../doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript" src="../../doxygen-awesome-interactive-toc.js"></script>
<script type="text/javascript" src="../../doxygen-awesome-tabs.js"></script>
<script type="text/javascript" src="../../toggle-alternative-theme.js"></script>
<script type="text/javascript">
    DoxygenAwesomeFragmentCopyButton.init()
    DoxygenAwesomeDarkModeToggle.init()
    DoxygenAwesomeParagraphLink.init()
    DoxygenAwesomeInteractiveToc.init()
    DoxygenAwesomeTabs.init()
</script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="../../custom.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="../../custom-alternative.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- https://tholman.com/github-corners/ -->
<!-- https://bryce.io/gitlab-corners/ -->
<style>.gitlab-corner-wrapper{overflow:hidden;width:100px;height:100px;position:absolute;top:0;right:0}.gitlab-corner{position:absolute;top:-16px;right:-50px;transform:rotate(45deg);background:#333;border:44px solid #333;border-bottom:none;border-top:#333 solid 16px}.gitlab-corner svg{width:60px;height:60px;margin-bottom:-4px}.cls-1{fill:#fc6d26}.cls-2{fill:#e24329}.cls-3{fill:#fca326}.gitlab-corner:hover .cls-1{animation:cycle .6s}.gitlab-corner:hover .cls-2{animation:cycleMid .6s}.gitlab-corner:hover .cls-3{animation:cycleEnd .6s}@keyframes cycle{100%,15%,60%{fill:#fc6d26}30%,75%{fill:#e24329}45%,90%{fill:#fca326}}@keyframes cycleMid{100%,15%,60%{fill:#e24329}30%,75%{fill:#fca326}45%,90%{fill:#fc6d26}}@keyframes cycleEnd{100%,15%,60%{fill:#fca326}30%,75%{fill:#fc6d26}45%,90%{fill:#e24329}}@media (max-width:500px){.gitlab-corner:hover .cls-1,.gitlab-corner:hover .cls-2,.gitlab-corner:hover .cls-3{animation:none}.gitlab-corner .cls-1{animation:cycle .6s}.gitlab-corner .cls-2{animation:cycleMid .6s}.gitlab-corner .cls-3{animation:cycleEnd .6s}}</style><div class="gitlab-corner-wrapper"><a href="https://gitlab.lrz.de/hpcsoftware/Peano" class="gitlab-corner" aria-label="View source on GitLab"><svg id="logo_art" data-name="logo art" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 586 559"><g id="g44"><path id="path46" class="cls-1" d="M461.17,301.83l-18.91-58.12L404.84,128.43a6.47,6.47,0,0,0-12.27,0L355.15,243.64H230.82L193.4,128.43a6.46,6.46,0,0,0-12.26,0L143.78,243.64l-18.91,58.19a12.88,12.88,0,0,0,4.66,14.39L293,435,456.44,316.22a12.9,12.9,0,0,0,4.73-14.39"/></g><g id="g48"><path id="path50" class="cls-2" d="M293,434.91h0l62.16-191.28H230.87L293,434.91Z"/></g><g id="g56"><path id="path58" class="cls-1" d="M293,434.91,230.82,243.63h-87L293,434.91Z"/></g><g id="g64"><path id="path66" class="cls-3" d="M143.75,243.69h0l-18.91,58.12a12.88,12.88,0,0,0,4.66,14.39L293,435,143.75,243.69Z"/></g><g id="g72"><path id="path74" class="cls-2" d="M143.78,243.69h87.11L193.4,128.49a6.47,6.47,0,0,0-12.27,0l-37.35,115.2Z"/></g><g id="g76"><path id="path78" class="cls-1" d="M293,434.91l62.16-191.28H442.3L293,434.91Z"/></g><g id="g80"><path id="path82" class="cls-3" d="M442.24,243.69h0l18.91,58.12a12.85,12.85,0,0,1-4.66,14.39L293,434.91l149.2-191.22Z"/></g><g id="g84"><path id="path86" class="cls-2" d="M442.28,243.69h-87.1l37.42-115.2a6.46,6.46,0,0,1,12.26,0l37.42,115.2Z"/></g></svg></a></div>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../Peano-icon.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Peano
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('d6/dd6/tutorials_peano4_assign_data_to_mesh.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Assigning data to mesh entities</div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md652">DaStGen</a></li>
<li class="level1"><a href="#autotoc_md653">Python data model</a></li>
<li class="level1"><a href="#autotoc_md654">Required operations per data entity</a></li>
<li class="level1"><a href="#autotoc_md655">Stack containers</a></li>
</ul>
</div>
<div class="textblock"><p>In Peano, cells, vertices and facets can hold data. At the moment, we have no support for data on edges in 3d, as noone as ever requested them.</p>
<h1><a class="anchor" id="autotoc_md652"></a>
DaStGen</h1>
<p>In principle, you can model your data type with whatever tool you like. You can notably write them as plain old C++ classes. However, it is very reasonable to use the package DaStGen 2. Every Peano data object has to to provide certain routines (e.g. for data exchange). Life is easier if those are auto-generated.</p>
<p>Historically, DaStGen (data structure generator) had been a Java tool which injected all kinds of semantics into the generated code such as automatic packing of bits or MPI data types as well as floating point compression. With DaStGen 2, we have rewritten everything in Python, and most of the functionality is gradually moving into the compiler. It is not the job of the data generation anymore to inject such functionality. What still is in there however is that the generator can inject certain code snippets (aspects in OO terminology) which add some core functionality.</p>
<p>The DaStGen data model is automatically lowered into plain C++ if it is attached to a Peano 4 project.</p>
<h1><a class="anchor" id="autotoc_md653"></a>
Python data model</h1>
<p>Adding data to your project with DaStGen always follows certain steps:</p>
<ol type="1">
<li>Create the data: <div class="fragment"><div class="line">data_object = <a class="code hl_namespace" href="../../d8/d8f/namespacepeano4.html">peano4</a>.<a class="code hl_namespace" href="../../db/dfe/namespacepeano4_1_1datamodel.html">datamodel</a>.<a class="code hl_namespace" href="../../d0/df3/namespacepeano4_1_1datamodel_1_1DaStGen2.html">DaStGen2</a>( <span class="stringliteral">&quot;myFancyName&quot;</span> )</div>
<div class="ttc" id="anamespacepeano4_1_1datamodel_1_1DaStGen2_html"><div class="ttname"><a href="../../d0/df3/namespacepeano4_1_1datamodel_1_1DaStGen2.html">peano4.datamodel.DaStGen2</a></div><div class="ttdef"><b>Definition</b> <a href="../../d3/deb/DaStGen2_8py_source.html#l00001">DaStGen2.py:1</a></div></div>
<div class="ttc" id="anamespacepeano4_1_1datamodel_html"><div class="ttname"><a href="../../db/dfe/namespacepeano4_1_1datamodel.html">peano4.datamodel</a></div><div class="ttdef"><b>Definition</b> <a href="../../d7/d0c/python_2peano4_2datamodel_2____init_____8py_source.html#l00001">__init__.py:1</a></div></div>
<div class="ttc" id="anamespacepeano4_html"><div class="ttname"><a href="../../d8/d8f/namespacepeano4.html">peano4</a></div><div class="ttdef"><b>Definition</b> <a href="../../df/d17/CellMarker_8h_source.html#l00014">CellMarker.h:14</a></div></div>
</div><!-- fragment --> At this point, we do not distinguish whether these data is attached to a cell, vertex or facet.</li>
<li>Add the attributes to the data object. This resembles calls similar to <div class="fragment"><div class="line">data_object.data.add_attribute( <a class="code hl_namespace" href="../../d6/d7b/namespacedastgen2.html">dastgen2</a>.<a class="code hl_namespace" href="../../d6/ddd/namespacedastgen2_1_1attributes.html">attributes</a>.<a class="code hl_namespace" href="../../d9/d9c/namespacedastgen2_1_1attributes_1_1Enumeration.html">Enumeration</a>( name=<span class="stringliteral">&quot;type&quot;</span>, variants=[<span class="stringliteral">&quot;Boundary&quot;</span>, <span class="stringliteral">&quot;Interior&quot;</span>, <span class="stringliteral">&quot;Coarse&quot;</span>, <span class="stringliteral">&quot;Outside&quot;</span>, <span class="stringliteral">&quot;Undefined&quot;</span>] ) )</div>
<div class="ttc" id="anamespacedastgen2_1_1attributes_1_1Enumeration_html"><div class="ttname"><a href="../../d9/d9c/namespacedastgen2_1_1attributes_1_1Enumeration.html">dastgen2.attributes.Enumeration</a></div><div class="ttdef"><b>Definition</b> <a href="../../d9/de7/Enumeration_8py_source.html#l00001">Enumeration.py:1</a></div></div>
<div class="ttc" id="anamespacedastgen2_1_1attributes_html"><div class="ttname"><a href="../../d6/ddd/namespacedastgen2_1_1attributes.html">dastgen2.attributes</a></div><div class="ttdef"><b>Definition</b> <a href="../../d8/d78/python_2dastgen2_2attributes_2____init_____8py_source.html#l00001">__init__.py:1</a></div></div>
<div class="ttc" id="anamespacedastgen2_html"><div class="ttname"><a href="../../d6/d7b/namespacedastgen2.html">dastgen2</a></div><div class="ttdef"><b>Definition</b> <a href="../../df/dd5/python_2dastgen2_2____init_____8py_source.html#l00001">__init__.py:1</a></div></div>
</div><!-- fragment --> A data object can hold an arbitrary number of attributes. However, there are specialisations of DaStGen2 classes for certain properties that do not allow for this.</li>
<li>Add the data model to Peano's data model. This is done through a code snippet similar to <div class="fragment"><div class="line">project = <a class="code hl_namespace" href="../../d8/d8f/namespacepeano4.html">peano4</a>.<a class="code hl_namespace" href="../../d1/df8/namespacepeano4_1_1Project.html">Project</a>(<span class="keyword">namespace</span>, project_name, directory, subdirectory)</div>
<div class="line">project.datamodel.add_vertex(data_object) # or</div>
<div class="line">project.datamodel.add_face(data_object) # or</div>
<div class="line">project.datamodel.add_cell(data_object)</div>
<div class="ttc" id="anamespacepeano4_1_1Project_html"><div class="ttname"><a href="../../d1/df8/namespacepeano4_1_1Project.html">peano4.Project</a></div><div class="ttdef"><b>Definition</b> <a href="../../d2/d62/python_2peano4_2Project_8py_source.html#l00001">Project.py:1</a></div></div>
</div><!-- fragment --> From hereon, the data object is tied to the project and the Peano 4 project will ensure that the data C++ class is put into vertexdata, facedata or celldata subdirectories, respectively. It will also ensure that the class is properly initialised (we expect each data model to hold some static MPI attributes for example).</li>
<li>Each and every observer now has to be told that this data model is to be used: <div class="fragment"><div class="line">my_observer.use_face(data_object)</div>
</div><!-- fragment --> If you omit this statement, the observer will not know that it has to move data over the data containers, and it does not know that these data models (faces in the example) have to be added to the action set signatures.</li>
</ol>
<p>In theory, not every observer has to handle all data. You can use A,B,C,D in a first sweep, and then only A,B in the second. Howevever, due to the data management algorithms in use (cmp the SISC Peano paper by Weinzierl and Mehl), we always need an even number of "left-out" mesh traversals, i.e.</p>
<ul>
<li>A,B,C,D</li>
<li>A,B</li>
<li>A,B</li>
<li>A,B,C,D</li>
</ul>
<p>works but one more injected mesh traversal with only A,B will certainly mess up things. Even in this case, it is not clear how MPI boundary exchange is actually modelled, so I generally do not recommend that you implement such patterns. Make every observer use all data.</p>
<h1><a class="anchor" id="autotoc_md654"></a>
Required operations per data entity</h1>
<dl class="todo"><dt><b><a class="el" href="../../dd/da0/todo.html#_todo000049">Todo</a></b></dt><dd>Something on store/load predicates</dd></dl>
<dl class="todo"><dt><b><a class="el" href="../../dd/da0/todo.html#_todo000050">Todo</a></b></dt><dd>Something on send and receives</dd></dl>
<h1><a class="anchor" id="autotoc_md655"></a>
Stack containers</h1>
<dl class="todo"><dt><b><a class="el" href="../../dd/da0/todo.html#_todo000051">Todo</a></b></dt><dd>Something on specialisations (heap, smartpointers, ...)</dd></dl>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../index.html">Peano</a></li><li class="navelem"><a class="el" href="../../dd/da2/page_peano4_home.html">Peano 4</a></li><li class="navelem"><a class="el" href="../../d3/d1a/tutorials_peano4_tutorials.html">Tutorials</a></li>
    <li class="footer">Generated on Tue Jul 1 2025 11:29:00 for Peano by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0 </li>
  </ul>
</div>
</body>
</html>
