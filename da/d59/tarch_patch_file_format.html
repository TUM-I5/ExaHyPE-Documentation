<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<link rel="icon" href="../../Peano-icon.png" type="image/x-icon" />
<title>Peano</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="../../doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript" src="../../doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript" src="../../doxygen-awesome-interactive-toc.js"></script>
<script type="text/javascript" src="../../doxygen-awesome-tabs.js"></script>
<script type="text/javascript" src="../../toggle-alternative-theme.js"></script>
<script type="text/javascript">
    DoxygenAwesomeFragmentCopyButton.init()
    DoxygenAwesomeDarkModeToggle.init()
    DoxygenAwesomeParagraphLink.init()
    DoxygenAwesomeInteractiveToc.init()
    DoxygenAwesomeTabs.init()
</script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="../../custom.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="../../custom-alternative.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- https://tholman.com/github-corners/ -->
<!-- https://bryce.io/gitlab-corners/ -->
<style>.gitlab-corner-wrapper{overflow:hidden;width:100px;height:100px;position:absolute;top:0;right:0}.gitlab-corner{position:absolute;top:-16px;right:-50px;transform:rotate(45deg);background:#333;border:44px solid #333;border-bottom:none;border-top:#333 solid 16px}.gitlab-corner svg{width:60px;height:60px;margin-bottom:-4px}.cls-1{fill:#fc6d26}.cls-2{fill:#e24329}.cls-3{fill:#fca326}.gitlab-corner:hover .cls-1{animation:cycle .6s}.gitlab-corner:hover .cls-2{animation:cycleMid .6s}.gitlab-corner:hover .cls-3{animation:cycleEnd .6s}@keyframes cycle{100%,15%,60%{fill:#fc6d26}30%,75%{fill:#e24329}45%,90%{fill:#fca326}}@keyframes cycleMid{100%,15%,60%{fill:#e24329}30%,75%{fill:#fca326}45%,90%{fill:#fc6d26}}@keyframes cycleEnd{100%,15%,60%{fill:#fca326}30%,75%{fill:#fc6d26}45%,90%{fill:#e24329}}@media (max-width:500px){.gitlab-corner:hover .cls-1,.gitlab-corner:hover .cls-2,.gitlab-corner:hover .cls-3{animation:none}.gitlab-corner .cls-1{animation:cycle .6s}.gitlab-corner .cls-2{animation:cycleMid .6s}.gitlab-corner .cls-3{animation:cycleEnd .6s}}</style><div class="gitlab-corner-wrapper"><a href="https://gitlab.lrz.de/hpcsoftware/Peano" class="gitlab-corner" aria-label="View source on GitLab"><svg id="logo_art" data-name="logo art" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 586 559"><g id="g44"><path id="path46" class="cls-1" d="M461.17,301.83l-18.91-58.12L404.84,128.43a6.47,6.47,0,0,0-12.27,0L355.15,243.64H230.82L193.4,128.43a6.46,6.46,0,0,0-12.26,0L143.78,243.64l-18.91,58.19a12.88,12.88,0,0,0,4.66,14.39L293,435,456.44,316.22a12.9,12.9,0,0,0,4.73-14.39"/></g><g id="g48"><path id="path50" class="cls-2" d="M293,434.91h0l62.16-191.28H230.87L293,434.91Z"/></g><g id="g56"><path id="path58" class="cls-1" d="M293,434.91,230.82,243.63h-87L293,434.91Z"/></g><g id="g64"><path id="path66" class="cls-3" d="M143.75,243.69h0l-18.91,58.12a12.88,12.88,0,0,0,4.66,14.39L293,435,143.75,243.69Z"/></g><g id="g72"><path id="path74" class="cls-2" d="M143.78,243.69h87.11L193.4,128.49a6.47,6.47,0,0,0-12.27,0l-37.35,115.2Z"/></g><g id="g76"><path id="path78" class="cls-1" d="M293,434.91l62.16-191.28H442.3L293,434.91Z"/></g><g id="g80"><path id="path82" class="cls-3" d="M442.24,243.69h0l18.91,58.12a12.85,12.85,0,0,1-4.66,14.39L293,434.91l149.2-191.22Z"/></g><g id="g84"><path id="path86" class="cls-2" d="M442.28,243.69h-87.1l37.42-115.2a6.46,6.46,0,0,1,12.26,0l37.42,115.2Z"/></g></svg></a></div>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../Peano-icon.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Peano
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('da/d59/tarch_patch_file_format.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Peano patch files</div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md1192">A minimal ASCII example file</a></li>
<li class="level1"><a href="#autotoc_md1193">More sophiciated dumps</a></li>
</ul>
</div>
<div class="textblock"><p>Peano has introduced its own block-structured output format. Its idea is that a mesh is dumped as an unstructured set of cell where each cell is uniquely identified through its offset and its size. The mesh data format lacks any topological information (connectivity). A cell always is a patch, i.e. holds a (topological) Cartesian mesh of dimensions \( k \times k \) or \( k \times k \times k \), respectively. If you work without patches, \( k=2 \). In this case, the block format obviously can yield a significant overhead.</p>
<h1><a class="anchor" id="autotoc_md1192"></a>
A minimal ASCII example file</h1>
<div class="fragment"><div class="line"><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"># Peano output file</span></div>
<div class="line"><span class="preprocessor"># Version 0.1</span></div>
<div class="line"><span class="preprocessor">#</span></div>
<div class="line">format ascii</div>
<div class="line">dimensions 3</div>
<div class="line">patch-size 6 6 6</div>
<div class="line"> </div>
<div class="line">begin vertex-metadata <span class="stringliteral">&quot;identifier A&quot;</span></div>
<div class="line">  number-of-unknowns 58</div>
<div class="line">  meta-data <span class="stringliteral">&quot;This is some fancy meta data&quot;</span>  </div>
<div class="line">end vertex-values</div>
<div class="line"> </div>
<div class="line">begin vertex-metadata <span class="stringliteral">&quot;time&quot;</span></div>
<div class="line">  number-of-unknowns 1</div>
<div class="line">  meta-data <span class="stringliteral">&quot;This is some fancy meta data&quot;</span>  </div>
<div class="line">end vertex-values</div>
<div class="line"> </div>
<div class="line">begin patch</div>
<div class="line">  offset 0.0 0.0 0.0</div>
<div class="line">  size   0.5 0.5 0.5</div>
<div class="line">  begin vertex-values <span class="stringliteral">&quot;identifier A&quot;</span></div>
<div class="line">    18.0 123.0 ...</div>
<div class="line">  end vertex-values</div>
<div class="line">  begin vertex-values <span class="stringliteral">&quot;time&quot;</span></div>
<div class="line">    1.0 1.0 ...</div>
<div class="line">  end vertex-values</div>
<div class="line">end patch </div>
<div class="line"> </div>
<div class="line">begin patch</div>
<div class="line">  offset 0.5 0.0 0.0</div>
<div class="line">  size   0.25 0.25 0.25</div>
<div class="line">  ...</div>
<div class="line">end patch </div>
</div><!-- fragment --><p>This spec file specifies a simple grid that</p>
<ul>
<li>The actual grid plotted consists of two patches (boxes discretised with a small regular grid).</li>
<li>Both small grids consist of \( 6 \times 6 \times 6 \) cells. They all have the same size, i.e. are equally spaced.</li>
<li>Each vertex holds two sets of unknowns. The first set is called <code>identifier A</code> and each entry (per vertex) comprises 58 double unknowns. The second set of unknowns per vertex is called <code>time</code> and is a scalar quantity.</li>
<li>The data per cube is ordered lexicographically, i.e. we run along the x-axis first, then along the y-axis, and finally along the z-axis.</li>
<li>All data is held as SoA, i.e. we first give all the 58 unknowns of the first vertex within the cube, then the 58 unknowns of the right neighbour vertex, and so forth.</li>
<li>All output data is ASCII.</li>
<li>Patches may overlap in both space and time.</li>
</ul>
<h1><a class="anchor" id="autotoc_md1193"></a>
More sophiciated dumps</h1>
<ul>
<li>The file format supports <code>cell-values</code>.</li>
<li>Each <code>vertex-values</code> or <code>cell-values</code> section in the header of the file, i.e. not embedded into a patch, may have a section</li>
</ul>
<div class="fragment"><div class="line">begin mapping</div>
<div class="line">  0.0 0.0 0.0</div>
<div class="line">  0.1 0.1 0.1</div>
<div class="line">  0.4 0.4 0.4</div>
<div class="line">  ...</div>
<div class="line">end mapping</div>
</div><!-- fragment --><p>If no mapping is present, our code dumps a regular subgrid (patch) per <code>patch</code> region. If a mapping is present, the mapping has exactly \( (6+1)
  \cdot (6+1) \cdot (6+1) \) entries in the example from the previous section. Each entry is a 3d coordinate relative to the unit cube and specifies how the topologially regular grid prescribed within a patch is to be mapped. You might for example plot points of the topologically regular grid with Gauss-Legendre spacing.</p><ul>
<li>The plotter by default always creates two types of files: The actual data files as described above and one meta file. The meta file solely links to the actual data:</li>
</ul>
<div class="fragment"><div class="line"><span class="preprocessor"># </span></div>
<div class="line"><span class="preprocessor"># Peano patch file </span></div>
<div class="line"><span class="preprocessor"># Version 0.1 </span></div>
<div class="line"><span class="preprocessor"># </span></div>
<div class="line">format ASCII</div>
<div class="line">begin dataset</div>
<div class="line">  include <span class="stringliteral">&quot;conserved-1-rank-0.peano-patch-file&quot;</span></div>
<div class="line">end dataset</div>
<div class="line">begin dataset</div>
<div class="line">  include <span class="stringliteral">&quot;conserved-2-rank-0.peano-patch-file&quot;</span></div>
<div class="line">end dataset</div>
</div><!-- fragment --><p>Per snapshot (typically time step), the plotter adds on <code>dataset</code> entry. Each data set holds one data file per active rank. Each rank writes its actual data into a separate file. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../index.html">Peano</a></li><li class="navelem"><a class="el" href="../../dd/d46/page_tarch_home.html">Technical Architecture (tarch)</a></li><li class="navelem"><a class="el" href="../../df/d47/documentation_tarch_visualisation.html">Visualisation</a></li>
    <li class="footer">Generated on Tue Jul 1 2025 11:29:07 for Peano by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0 </li>
  </ul>
</div>
</body>
</html>
